<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VerseVault - Faith-Based Cognitive Wellness | Building On The Faith Ministry</title>
    <meta name="description" content="Strengthen your mind and spirit with Scripture-based cognitive exercises. Designed for seniors, caregivers, and those facing memory challenges.">
    
    <!-- Stripe Integration -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Header Styles */
        .header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
            border: 4px solid #FF8C00;
            box-shadow: 0 0 0 4px #FFD700;
        }
        
        .header h1 {
            color: #764ba2;
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .scripture-verse {
            font-style: italic;
            color: #666;
            font-size: 18px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #FFD700;
        }
        
        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 15px;
            border-radius: 10px;
            border: 2px solid #FF8C00;
            font-size: 16px;
            cursor: pointer;
        }
        
        /* Welcome/Disclaimer Modal */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
        }
        
        .welcome-modal {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            border: 6px solid #FF8C00;
            box-shadow: 0 0 0 6px #FFD700, 0 20px 60px rgba(0,0,0,0.5);
        }
        
        .welcome-modal h2 {
            color: #764ba2;
            font-size: 36px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .welcome-modal h3 {
            color: #FF8C00;
            font-size: 24px;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 3px solid #FFD700;
            padding-bottom: 10px;
        }
        
        .welcome-modal p {
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
        }
        
        .welcome-modal ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .welcome-modal li {
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 10px;
        }
        
        .benefits-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #FFD700;
            margin: 20px 0;
        }
        
        .disclaimer-box {
            background: #fff3cd;
            border: 3px solid #ff9966;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .disclaimer-box strong {
            color: #cc0000;
            font-size: 18px;
        }
        
        .acceptance-checkbox {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 30px 0;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 10px;
            border: 3px solid #4caf50;
        }
        
        .acceptance-checkbox input[type="checkbox"] {
            width: 25px;
            height: 25px;
            cursor: pointer;
        }
        
        .acceptance-checkbox label {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
        }
        
        .accept-btn {
            width: 100%;
            padding: 20px;
            font-size: 22px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: not-allowed;
            opacity: 0.5;
            transition: all 0.3s;
        }
        
        .accept-btn.enabled {
            cursor: pointer;
            opacity: 1;
            border: 4px solid #FFD700;
        }
        
        .accept-btn.enabled:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(118, 75, 162, 0.4);
        }
        
        /* Trial Banner */
        .trial-banner {
            background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            border: 4px solid #FFD700;
        }
        
        /* Card Styles */
        .card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 20px;
            border: 4px solid #FF8C00;
            box-shadow: 0 0 0 4px #FFD700, 0 10px 30px rgba(0,0,0,0.2);
        }
        
        /* Exercise Grid */
        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .exercise-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 4px solid #FF8C00;
            box-shadow: 0 0 0 4px #FFD700;
        }
        
        .exercise-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 0 4px #FFD700, 0 15px 35px rgba(0,0,0,0.3);
        }
        
        .exercise-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .exercise-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .exercise-title {
            font-size: 22px;
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 10px;
        }
        
        .exercise-count {
            color: #666;
            font-size: 16px;
        }
        
        /* Button Styles */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #FFD700;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border-color: #FF8C00;
        }
        
        .btn-warning {
            background: #FF8C00;
            color: white;
            border-color: #FFD700;
        }
        
        .btn-success {
            background: #4caf50;
            color: white;
            border-color: #FFD700;
        }
        
        /* Input Styles */
        input, select {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        /* Progress Styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 4px solid #FF8C00;
            box-shadow: 0 0 0 4px #FFD700;
        }
        
        .stat-value {
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 18px;
            color: #666;
            font-weight: bold;
        }
        
        /* Activity Screen */
        .activity-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            border: 4px solid #FF8C00;
            box-shadow: 0 0 0 4px #FFD700;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .activity-question {
            font-size: 28px;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.6;
        }
        
        .activity-input {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            text-align: center;
            border: 3px solid #667eea;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .reference {
            text-align: center;
            color: #666;
            font-style: italic;
            margin-top: 15px;
        }
        
        .difficulty-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .difficulty-beginner { background: #4caf50; color: white; }
        .difficulty-intermediate { background: #FF8C00; color: white; }
        .difficulty-expert { background: #e91e63; color: white; }
        
        .feedback {
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 3px solid #4caf50;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 3px solid #e91e63;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 32px; }
            .exercise-grid { grid-template-columns: 1fr; }
            .modal-content { margin: 20px; padding: 20px; }
            .language-selector { position: static; margin: 10px auto; display: block; }
        }
        
        .hidden { display: none; }
        
        /* Admin Panel */
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 12px 24px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .admin-tab.active {
            background: #667eea;
            color: white;
            border-color: #FFD700;
        }
        
        .admin-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #ddd;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .code-available { background: #d4edda; color: #155724; }
        .code-used { background: #f8d7da; color: #721c24; }
        
        .lifetime-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-size: 18px;
            margin-top: 15px;
            border: 3px solid #FF8C00;
        }
    </style>
</head>
<body>
    <!-- Welcome/Disclaimer Modal - MUST ACCEPT BEFORE ENTERING -->
    <div id="welcomeOverlay" class="welcome-overlay">
        <div class="welcome-modal">
            <h2>üìñ Welcome to VerseVault‚Ñ¢</h2>
            <p style="text-align: center; font-size: 20px; color: #764ba2; font-weight: bold; font-style: italic;">
                "Thy word have I hid in mine heart, that I might not sin against thee." - Psalms 119:11
            </p>
            
            <h3>üß† About VerseVault</h3>
            <p>
                <strong>VerseVault</strong> is a faith-based cognitive wellness application created by <strong>Building On The Faith Ministry</strong> 
                and <strong>Elder Robert Chalk Jr.</strong> to help people strengthen their minds and spirits through Scripture memorization 
                and biblical activities.
            </p>
            <p>
                Our mission is to serve <strong>seniors, caregivers, families, and individuals facing memory challenges</strong> including 
                those affected by Alzheimer's disease, dementia, and age-related cognitive decline.
            </p>
            
            <h3>üí™ Health & Cognitive Benefits</h3>
            <div class="benefits-list">
                <p><strong>Regular use of VerseVault may help with:</strong></p>
                <ul>
                    <li><strong>Memory Enhancement</strong> - Scripture memorization exercises strengthen short-term and long-term memory</li>
                    <li><strong>Mental Stimulation</strong> - Engaging biblical puzzles and activities keep the mind active and alert</li>
                    <li><strong>Focus & Concentration</strong> - Verse completion exercises improve attention span and mental clarity</li>
                    <li><strong>Cognitive Flexibility</strong> - Multiple activity types challenge different areas of brain function</li>
                    <li><strong>Emotional Well-being</strong> - Faith-based content provides comfort, hope, and spiritual strength</li>
                    <li><strong>Social Connection</strong> - Family plans enable shared activities and meaningful intergenerational bonding</li>
                    <li><strong>Mental Resilience</strong> - Progressive difficulty levels promote continued cognitive growth</li>
                    <li><strong>Alzheimer's Support</strong> - Structured memory activities specifically designed for those with memory impairments</li>
                </ul>
                <p style="margin-top: 15px;">
                    <em>These activities are designed based on research showing that mental exercises, social engagement, 
                    and meaningful activity can support cognitive health in aging adults.</em>
                </p>
            </div>
            
            <h3>‚öñÔ∏è Important Legal Disclaimers</h3>
            <div class="disclaimer-box">
                <p><strong>PLEASE READ CAREFULLY BEFORE USING THIS APPLICATION:</strong></p>
                
                <p style="margin-top: 15px;">
                    <strong>1. NOT A MEDICAL DEVICE OR TREATMENT</strong><br>
                    VerseVault is an <strong>educational and faith-based application only</strong>. It is <strong>NOT</strong> a medical device, 
                    medical treatment, therapy, or diagnostic tool. This app does not prevent, treat, cure, or diagnose any medical condition 
                    including Alzheimer's disease, dementia, or cognitive impairment.
                </p>
                
                <p>
                    <strong>2. NO MEDICAL ADVICE</strong><br>
                    The content in this application does not constitute medical, therapeutic, or professional advice. 
                    <strong>Always consult with qualified healthcare providers</strong> for medical concerns, diagnosis, treatment, 
                    and care decisions related to Alzheimer's, dementia, or any health condition.
                </p>
                
                <p>
                    <strong>3. NO GUARANTEES OR CLAIMS</strong><br>
                    We make <strong>NO guarantees or promises</strong> about results, improvements, health outcomes, or cognitive benefits 
                    from using this application. Individual results vary, and no specific outcomes are promised or implied.
                </p>
                
                <p>
                    <strong>4. USER RESPONSIBILITY</strong><br>
                    You are solely responsible for your own health decisions and use of this application. Use of VerseVault should 
                    <strong>supplement, not replace</strong>, professional medical care, therapy, or prescribed treatments.
                </p>
                
                <p>
                    <strong>5. SUPERVISION RECOMMENDED</strong><br>
                    Caregivers should supervise vulnerable individuals using this application, especially those with advanced 
                    Alzheimer's or cognitive impairments.
                </p>
                
                <p>
                    <strong>6. LIMITATION OF LIABILITY</strong><br>
                    Building On The Faith Ministry, Elder Robert Chalk Jr., and all affiliates are <strong>NOT LIABLE</strong> for any 
                    damages, injuries, health outcomes, or consequences arising from use or inability to use this application.
                </p>
                
                <p>
                    <strong>7. EDUCATIONAL PURPOSE ONLY</strong><br>
                    This application is provided for <strong>educational, spiritual enrichment, and cognitive engagement purposes only</strong>. 
                    All biblical content is from the King James Version (public domain).
                </p>
                
                <p>
                    <strong>8. DATA & PRIVACY</strong><br>
                    Progress data is saved locally in your browser. We do not store personal health information or share your data.
                </p>
                
                <p>
                    <strong>9. TERMS MAY CHANGE</strong><br>
                    We reserve the right to modify content, features, and terms at any time without notice.
                </p>
                
                <p style="margin-top: 15px; font-size: 18px;">
                    <strong style="color: #cc0000;">By using this application, you acknowledge that you have read, understood, 
                    and agree to all disclaimers and terms stated above.</strong>
                </p>
            </div>
            
            <div class="acceptance-checkbox">
                <input type="checkbox" id="acceptTerms" onchange="toggleAcceptButton()" />
                <label for="acceptTerms">
                    ‚úì I have read and accept all terms, disclaimers, and understand this is NOT medical treatment
                </label>
            </div>
            
            <button id="acceptButton" class="accept-btn" onclick="acceptAndEnter()" disabled>
                Enter VerseVault
            </button>
        </div>
    </div>
    
    <div class="container">
        <!-- Language Selector -->
        <select id="topLanguageSelector" class="language-selector">
            <option value="en">üá∫üá∏ English</option>
            <option value="es">üá™üá∏ Espa√±ol</option>
            <option value="fr">üá´üá∑ Fran√ßais</option>
            <option value="pt">üáßüá∑ Portugu√™s</option>
            <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
        </select>

        <!-- Main Content -->
        <div id="loginScreen">
            <div class="header">
                <h1>üìñ VerseVault</h1>
                <div class="scripture-verse" id="headerScripture">
                    Psalms 119:11 - "Thy word have I hid in mine heart, that I might not sin against thee."
                </div>
                <p style="margin-top: 20px; font-size: 20px; color: #764ba2; font-weight: bold;">
                    Faith-Based Cognitive Wellness Application
                </p>
            </div>
            
            <div class="card">
                <h2 style="text-align: center; margin-bottom: 30px; color: #764ba2;">Welcome to VerseVault</h2>
                <input type="text" id="usernameInput" placeholder="Enter Username" />
                <input type="email" id="emailInput" placeholder="Enter Email Address" style="margin-top: 10px;" />
                <input type="password" id="passwordInput" placeholder="Enter Password (optional for new accounts)" />
                
                <div style="margin: 15px 0; text-align: left;">
                    <label style="display: flex; align-items: center; font-size: 14px; cursor: pointer;">
                        <input type="checkbox" id="emailOptIn" style="margin-right: 8px; width: auto; cursor: pointer;" checked />
                        <span>‚úâÔ∏è Send me ministry updates, new features, and encouragement</span>
                    </label>
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" onclick="handleLogin()">Sign In / Register</button>
                <button class="btn btn-success" style="width: 100%; margin-top: 10px;" onclick="showLifetimeCodeModal()">üëë Have a Lifetime Code?</button>
                <p style="text-align: center; margin-top: 20px; font-size: 12px; color: #999; cursor: pointer;" onclick="adminSecretClick()">¬© 2024 Building On The Faith Ministry</p>
                <p style="text-align: center; margin-top: 10px; font-size: 12px;">
                    <a href="#" onclick="showPrivacyPolicy(); return false;" style="color: #667eea; text-decoration: none;">Privacy Policy</a> | 
                    <a href="#" onclick="showTermsOfUse(); return false;" style="color: #667eea; text-decoration: none;">Terms of Use</a>
                </p>
            </div>
        </div>

        <!-- Lifetime Code Modal -->
        <div id="lifetimeCodeModal" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; justify-content: center; align-items: center; z-index: 9999;">
            <div class="card" style="max-width: 500px; margin: 20px;">
                <h2 style="text-align: center; color: #764ba2; margin-bottom: 20px;">üëë Activate Lifetime Code</h2>
                <p style="text-align: center; margin-bottom: 20px;">Enter your username and lifetime access code below:</p>
                <input type="text" id="lifetimeUsername" placeholder="Enter Username" style="margin-bottom: 15px;" />
                <input type="text" id="lifetimeCode" placeholder="VV-LIFE-2024-XXXX" style="margin-bottom: 15px; text-transform: uppercase;" />
                <button class="btn btn-success" style="width: 100%;" onclick="activateLifetimeCode()">Activate Code</button>
                <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="closeLifetimeCodeModal()">Cancel</button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; justify-content: center; align-items: center; z-index: 9999; overflow-y: auto;">
            <div class="card" style="max-width: 600px; margin: 20px; max-height: 90vh; overflow-y: auto;">
                <h2 style="text-align: center; color: #764ba2; margin-bottom: 30px;">‚öôÔ∏è Settings</h2>
                
                <h3 style="color: #FF8C00; margin-bottom: 15px;">Language / Idioma / Langue</h3>
                <select id="settingsLanguageSelector" style="width: 100%; margin-bottom: 30px;" onchange="changeLanguageFromSettings()">
                    <option value="en">üá∫üá∏ English</option>
                    <option value="es">üá™üá∏ Espa√±ol</option>
                    <option value="fr">üá´üá∑ Fran√ßais</option>
                    <option value="pt">üáßüá∑ Portugu√™s</option>
                    <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                </select>
                
                <h3 style="color: #FF8C00; margin-bottom: 15px;">Account Information</h3>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                    <p><strong>Username:</strong> <span id="settingsUsername"></span></p>
                    <p><strong>Account Type:</strong> <span id="settingsAccountType"></span></p>
                    <p><strong>Member Since:</strong> <span id="settingsMemberSince"></span></p>
                </div>
                
                <h3 style="color: #FF8C00; margin-bottom: 15px;">Subscription Management</h3>
                <div id="subscriptionSection" style="margin-bottom: 30px;"></div>
                
                <button class="btn btn-secondary" style="width: 100%;" onclick="closeSettings()">Close</button>
            </div>
        </div>

        <!-- Admin Panel Modal -->
        <div id="adminModal" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; justify-content: center; align-items: center; z-index: 9999; overflow-y: auto;">
            <div class="card" style="max-width: 900px; margin: 20px; max-height: 90vh; overflow-y: auto;">
                <h2 style="text-align: center; color: #764ba2; margin-bottom: 30px;">üîê Admin Panel</h2>
                
                <div class="admin-tabs">
                    <button class="admin-tab active" onclick="showAdminTab('codes')">Lifetime Codes</button>
                    <button class="admin-tab" onclick="showAdminTab('users')">User Statistics</button>
                    <button class="admin-tab" onclick="showAdminTab('direct')">Direct Access</button>
                    <button class="admin-tab" onclick="showAdminTab('emails')">üìß Email Marketing</button>
                </div>
                
                <div id="adminCodesTab" class="admin-content">
                    <h3 style="color: #FF8C00; margin-bottom: 15px;">100 Lifetime Access Codes</h3>
                    <button class="btn btn-success" onclick="exportCodesToCSV()" style="margin-bottom: 15px;">üì• Export to CSV</button>
                    <div style="max-height: 400px; overflow-y: auto;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Status</th>
                                    <th>Used By</th>
                                    <th>Date Used</th>
                                </tr>
                            </thead>
                            <tbody id="codesTableBody"></tbody>
                        </table>
                    </div>
                </div>
                
                <div id="adminUsersTab" class="admin-content hidden">
                    <h3 style="color: #FF8C00; margin-bottom: 15px;">User Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="adminTotalUsers">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="adminTrialUsers">0</div>
                            <div class="stat-label">Trial Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="adminPremiumUsers">0</div>
                            <div class="stat-label">Premium Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="adminFamilyUsers">0</div>
                            <div class="stat-label">Family Plan Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="adminLifetimeUsers">0</div>
                            <div class="stat-label">Lifetime Members</div>
                        </div>
                    </div>
                </div>
                
                <div id="adminDirectTab" class="admin-content hidden">
                    <h3 style="color: #FF8C00; margin-bottom: 15px;">Grant Direct Access</h3>
                    <p style="margin-bottom: 20px;">Grant lifetime access to any user without requiring a code or payment:</p>
                    <input type="text" id="directAccessUsername" placeholder="Enter Username" style="margin-bottom: 15px;" />
                    <button class="btn btn-success" style="width: 100%;" onclick="grantDirectAccess()">Grant Full Lifetime Access</button>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-top: 20px; border: 2px solid #ffc107;">
                        <strong>‚ö†Ô∏è Note:</strong> This grants permanent, free access without using any lifetime codes.
                    </div>
                </div>
                
                <div id="adminEmailsTab" class="admin-content hidden">
                    <h3 style="color: #FF8C00; margin-bottom: 15px;">üìß Email Marketing</h3>
                    
                    <div style="background: #e7f3ff; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #2196F3;">
                        <h4 style="color: #2196F3; margin-bottom: 10px;">Email List Export</h4>
                        <p style="margin-bottom: 15px;">Export your email list to use with marketing platforms like Mailchimp, SendGrid, or ConvertKit.</p>
                        <button class="btn btn-primary" style="width: 100%;" onclick="exportEmailList()">üì• Export Email List to CSV</button>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #ffc107;">
                        <h4 style="color: #856404; margin-bottom: 10px;">Email Events Tracked</h4>
                        <p style="margin-bottom: 10px;">The following email triggers are being tracked:</p>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 5px 0;">‚úÖ New user registration (Welcome email)</li>
                            <li style="padding: 5px 0;">‚è∞ Trial ending (Day 5 reminder)</li>
                            <li style="padding: 5px 0;">üõí Checkout abandoned</li>
                            <li style="padding: 5px 0;">üéâ Purchase complete (Thank you + share)</li>
                        </ul>
                        <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="viewEmailEvents()">View All Email Events</button>
                    </div>
                    
                    <div style="background: #f3e5f5; padding: 20px; border-radius: 10px; border: 2px solid #9c27b0;">
                        <h4 style="color: #9c27b0; margin-bottom: 10px;">Email Templates</h4>
                        <p style="margin-bottom: 15px;">Pre-written templates are available in the code (EMAIL_TEMPLATES object). Copy these to your email marketing platform:</p>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 5px 0;">üìß Welcome Email</li>
                            <li style="padding: 5px 0;">‚è∞ Trial Ending Reminder</li>
                            <li style="padding: 5px 0;">üéâ Thank You for Purchase</li>
                            <li style="padding: 5px 0;">üíù Referral Request</li>
                        </ul>
                    </div>
                </div>
                
                <button class="btn btn-secondary" style="width: 100%; margin-top: 20px;" onclick="closeAdmin()">Close Admin Panel</button>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboardScreen" class="hidden">
            <div class="header">
                <h1>üìñ VerseVault</h1>
                <div class="scripture-verse" id="dashboardScripture">
                    Psalms 119:11 - "Thy word have I hid in mine heart, that I might not sin against thee."
                </div>
                <p id="welcomeMessage" style="margin-top: 15px; font-size: 24px; font-weight: bold; color: #764ba2;"></p>
                <div id="lifetimeBadge" class="hidden lifetime-badge">
                    üëë Lifetime Member
                </div>
            </div>
            
            <div id="trialBanner" class="trial-banner hidden"></div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="statPoints">0</div>
                    <div class="stat-label">Total Points</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="statStreak">0</div>
                    <div class="stat-label">Day Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="statCompleted">0</div>
                    <div class="stat-label">Completed</div>
                </div>
            </div>
            
            <div class="card">
                <h2 style="margin-bottom: 20px; color: #764ba2;">Choose Your Exercise</h2>
                <div id="exerciseGrid" class="exercise-grid"></div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="showSettings()">‚öôÔ∏è Settings</button>
                <button class="btn btn-secondary" onclick="showHelp()">‚ùì Help</button>
                <button class="btn btn-warning" onclick="signOut()">üö™ Sign Out</button>
            </div>
        </div>

        <!-- Activity Screen -->
        <div id="activityScreen" class="hidden">
            <div class="activity-container">
                <button class="btn btn-secondary" onclick="exitActivity()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                <div id="activityContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ===================================
        // STRIPE CONFIGURATION
        // ===================================
        const stripe = Stripe('pk_live_51SHSek1ylIvYBzQH8GxBGmnLmrVtV49JgfwrqoOxSC7OkMsz4rgdOOQJB9zc9aH3KtnvOT3CodyeofTsQSr99m7H00QyjpJ2UZ');
        
        const STRIPE_PRICES = {
            monthly: 'price_1SMFLR1ylIvYBzQHA0nCdVfZ',    // Premium Monthly - $4.99/month
            annual: 'price_1SMFO61ylIvYBzQHSMS1vM1z'      // Family Plan - $9.99/month
        };

        // ===================================
        // WELCOME MODAL FUNCTIONS
        // ===================================
        function toggleAcceptButton() {
            const checkbox = document.getElementById('acceptTerms');
            const button = document.getElementById('acceptButton');
            
            if (checkbox.checked) {
                button.disabled = false;
                button.classList.add('enabled');
            } else {
                button.disabled = true;
                button.classList.remove('enabled');
            }
        }
        
        function acceptAndEnter() {
            // Save acceptance to localStorage
            localStorage.setItem('vv_terms_accepted', 'true');
            localStorage.setItem('vv_terms_accepted_date', new Date().toISOString());
            
            // Hide the welcome modal
            document.getElementById('welcomeOverlay').style.display = 'none';
        }
        
        // Check if terms already accepted on page load
        window.addEventListener('DOMContentLoaded', function() {
            const termsAccepted = localStorage.getItem('vv_terms_accepted');
            if (termsAccepted === 'true') {
                document.getElementById('welcomeOverlay').style.display = 'none';
            }
        });

        // ===================================
        // TRANSLATIONS
        // ===================================
        const translations = {
            en: {
                headerScripture: 'Psalms 119:11 - "Thy word have I hid in mine heart, that I might not sin against thee."',
                welcome: 'Welcome',
                trialEnding: 'days left in trial',
                trialExpired: 'Trial expired - Subscribe to continue',
                points: 'Total Points',
                streak: 'Day Streak',
                completed: 'Completed',
                settings: 'Settings',
                help: 'Help',
                signOut: 'Sign Out',
                submit: 'Submit Answer',
                next: 'Next Activity',
                exit: 'Exit',
                correct: '‚úì Correct!',
                incorrect: '‚úó Incorrect',
                locked: 'üîí Locked'
            },
            es: {
                headerScripture: 'Salmos 119:11 - "En mi coraz√≥n he guardado tus dichos, para no pecar contra ti."',
                welcome: 'Bienvenido',
                trialEnding: 'd√≠as restantes de prueba',
                trialExpired: 'Prueba expirada - Suscr√≠base para continuar',
                points: 'Puntos Totales',
                streak: 'Racha de D√≠as',
                completed: 'Completado',
                settings: 'Configuraci√≥n',
                help: 'Ayuda',
                signOut: 'Cerrar Sesi√≥n',
                submit: 'Enviar Respuesta',
                next: 'Siguiente Actividad',
                exit: 'Salir',
                correct: '‚úì ¬°Correcto!',
                incorrect: '‚úó Incorrecto',
                locked: 'üîí Bloqueado'
            },
            fr: {
                headerScripture: 'Psaumes 119:11 - "Je serre ta parole dans mon c≈ìur, afin de ne pas p√©cher contre toi."',
                welcome: 'Bienvenue',
                trialEnding: 'jours restants d\'essai',
                trialExpired: 'Essai expir√© - Abonnez-vous pour continuer',
                points: 'Points Totaux',
                streak: 'S√©rie de Jours',
                completed: 'Compl√©t√©',
                settings: 'Param√®tres',
                help: 'Aide',
                signOut: 'Se D√©connecter',
                submit: 'Soumettre la R√©ponse',
                next: 'Activit√© Suivante',
                exit: 'Quitter',
                correct: '‚úì Correct!',
                incorrect: '‚úó Incorrect',
                locked: 'üîí Verrouill√©'
            },
            pt: {
                headerScripture: 'Salmos 119:11 - "Escondi a tua palavra no meu cora√ß√£o, para eu n√£o pecar contra ti."',
                welcome: 'Bem-vindo',
                trialEnding: 'dias restantes no per√≠odo de teste',
                trialExpired: 'Per√≠odo de teste expirado - Inscreva-se para continuar',
                points: 'Pontos Totais',
                streak: 'Sequ√™ncia de Dias',
                completed: 'Conclu√≠do',
                settings: 'Configura√ß√µes',
                help: 'Ajuda',
                signOut: 'Sair',
                submit: 'Enviar Resposta',
                next: 'Pr√≥xima Atividade',
                exit: 'Sair',
                correct: '‚úì Correto!',
                incorrect: '‚úó Incorreto',
                locked: 'üîí Bloqueado'
            },
            zh: {
                headerScripture: 'ËØóÁØá 119:11 - "ÊàëÂ∞Ü‰Ω†ÁöÑËØùËóèÂú®ÂøÉÈáåÔºåÂÖçÂæóÊàëÂæóÁΩ™‰Ω†„ÄÇ"',
                welcome: 'Ê¨¢Ëøé',
                trialEnding: 'ËØïÁî®ÊúüÂâ©‰ΩôÂ§©Êï∞',
                trialExpired: 'ËØïÁî®ÊúüÂ∑≤Ëøá - ËÆ¢ÈòÖ‰ª•ÁªßÁª≠',
                points: 'ÊÄªÁßØÂàÜ',
                streak: 'ËøûÁª≠Â§©Êï∞',
                completed: 'Â∑≤ÂÆåÊàê',
                settings: 'ËÆæÁΩÆ',
                help: 'Â∏ÆÂä©',
                signOut: 'ÈÄÄÂá∫',
                submit: 'Êèê‰∫§Á≠îÊ°à',
                next: '‰∏ã‰∏Ä‰∏™Ê¥ªÂä®',
                exit: 'ÈÄÄÂá∫',
                correct: '‚úì Ê≠£Á°Æ!',
                incorrect: '‚úó ÈîôËØØ',
                locked: 'üîí Â∑≤ÈîÅÂÆö'
            }
        };

        let currentLanguage = 'en';
        
        // Language selector sync
        document.getElementById('topLanguageSelector').addEventListener('change', function(e) {
            currentLanguage = e.target.value;
            updateLanguage();
        });

        function updateLanguage() {
            const t = translations[currentLanguage];
            document.getElementById('headerScripture').textContent = t.headerScripture;
            if (document.getElementById('dashboardScripture')) {
                document.getElementById('dashboardScripture').textContent = t.headerScripture;
            }
        }

        // ===================================
        // CORE DATA STRUCTURES
        // ===================================
        
        // App State
        let currentUser = null;
        let currentExercise = null;
        let currentActivityIndex = 0;
        let currentScore = 0;

        // 100 Lifetime Access Codes
        const LIFETIME_CODES = [];
        for (let i = 1; i <= 100; i++) {
            const code = `VV-LIFE-2024-${String(i).padStart(4, '0')}`;
            LIFETIME_CODES.push({ code, used: false, usedBy: null, usedDate: null });
        }

        // Initialize from localStorage
        const storedCodes = localStorage.getItem('vv_lifetime_codes');
        let lifetimeCodes = storedCodes ? JSON.parse(storedCodes) : LIFETIME_CODES;

        const storedUsers = localStorage.getItem('vv_users');
        let users = storedUsers ? JSON.parse(storedUsers) : {};

        // Save data
        function saveData() {
            localStorage.setItem('vv_lifetime_codes', JSON.stringify(lifetimeCodes));
            localStorage.setItem('vv_users', JSON.stringify(users));
        }
        
        // ===================================
        // EMAIL TRACKING & AUTOMATION SYSTEM
        // ===================================
        
        // Track email events for later processing
        function trackEmailEvent(eventType, data) {
            let emailEvents = JSON.parse(localStorage.getItem('vv_email_events') || '[]');
            emailEvents.push({
                type: eventType,
                data: data,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem('vv_email_events', JSON.stringify(emailEvents));
            
            // Log for admin to export
            console.log(`üìß Email Event Tracked: ${eventType}`, data);
        }
        
        // Get all email events (for admin to export to email service)
        function getEmailEvents() {
            return JSON.parse(localStorage.getItem('vv_email_events') || '[]');
        }
        
        // Export email list for marketing (admin function)
        function exportEmailList() {
            const userList = Object.values(users);
            const emailList = userList
                .filter(user => user.email && user.emailOptIn)
                .map(user => ({
                    username: user.username,
                    email: user.email,
                    accountType: user.accountType,
                    joinedDate: user.createdDate,
                    optIn: user.emailOptIn
                }));
            
            const csv = [
                'Username,Email,AccountType,JoinedDate,OptIn',
                ...emailList.map(u => `${u.username},${u.email},${u.accountType},${u.joinedDate},${u.optIn}`)
            ].join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `versevault-emails-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            alert(`‚úÖ Exported ${emailList.length} email addresses!\n\nYou can now import this CSV into:\n‚Ä¢ Mailchimp\n‚Ä¢ SendGrid\n‚Ä¢ ConvertKit\n‚Ä¢ Any email marketing platform`);
        }
        
        // Check for abandoned cart (trial users who haven't upgraded)
        function checkAbandonedCart() {
            if (!currentUser || currentUser.accountType !== 'trial') return;
            
            const trialStart = new Date(currentUser.trialStartDate);
            const now = new Date();
            const daysPassed = Math.floor((now - trialStart) / (1000 * 60 * 60 * 24));
            
            // Track abandoned cart on day 5 of trial (2 days before expiry)
            if (daysPassed === 5 && currentUser.email && currentUser.emailOptIn) {
                trackEmailEvent('abandoned_cart', {
                    username: currentUser.username,
                    email: currentUser.email,
                    daysLeft: 7 - daysPassed,
                    message: 'Trial ending soon - encourage upgrade'
                });
            }
        }
        
        // Track successful purchase
        function trackPurchase(plan) {
            if (currentUser && currentUser.email) {
                trackEmailEvent('purchase_complete', {
                    username: currentUser.username,
                    email: currentUser.email,
                    plan: plan,
                    date: new Date().toISOString(),
                    message: 'Send thank you email + encourage sharing'
                });
            }
        }
        
        // EMAIL TEMPLATES FOR YOUR EMAIL SERVICE
        // Copy these templates to Mailchimp, SendGrid, or your email platform
        
        const EMAIL_TEMPLATES = {
            welcome: {
                subject: "Welcome to VerseVault! üôè Your 7-Day Free Trial Starts Now",
                body: `
Hi [Username],

Welcome to VerseVault! We're so glad you're here.

Your 7-day free trial has started, giving you access to:
‚úÖ 3 Scripture memory exercises
‚úÖ 15 engaging activities
‚úÖ Progress tracking

After your trial, upgrade to Premium ($4.99/month) or Family Plan ($9.99/month) for:
‚úÖ All 20 exercise types
‚úÖ 600+ activities
‚úÖ Unlimited access
‚úÖ Family sharing (Family Plan)

Start your journey today: [LINK]

Blessings,
Elder Robert Chalk Jr.
Building On The Faith Ministry

P.S. Having questions? Just reply to this email!
                `
            },
            
            trial_ending: {
                subject: "‚è∞ Your VerseVault Trial Ends in 2 Days",
                body: `
Hi [Username],

Your 7-day free trial is almost complete!

Don't lose access to your Scripture memory progress.

üéÅ SPECIAL OFFER: Upgrade now and get your first month at 20% off!

Premium Plan: $4.99/month ‚Üí $3.99 first month
Family Plan: $9.99/month ‚Üí $7.99 first month

[UPGRADE NOW] button

What you'll keep:
‚úÖ All your progress and points
‚úÖ Your daily streak
‚úÖ Access to all 20 exercises
‚úÖ 600+ activities

Upgrade now: [LINK]

Blessings,
Elder Robert Chalk Jr.
                `
            },
            
            purchase_thanks: {
                subject: "üéâ Thank You for Supporting VerseVault!",
                body: `
Hi [Username],

Thank you for subscribing to VerseVault [Plan]!

Your support helps us:
üôè Spread God's Word
üí° Help people with cognitive challenges
‚ù§Ô∏è Build stronger faith communities

SHARE THE BLESSING:
Know someone who would benefit? Share VerseVault!

[SHARE ON FACEBOOK]
[SHARE ON EMAIL]
[SHARE VIA TEXT]

For every person you refer who subscribes, we'll add 500 bonus points to your account!

Let's spread the Good News together!

Blessings,
Elder Robert Chalk Jr.
Building On The Faith Ministry

P.S. Your invoice is attached.
                `
            },
            
            referral_request: {
                subject: "Help Us Help Others - Share VerseVault üíù",
                body: `
Hi [Username],

We've noticed you're loving VerseVault! (You've completed [X] activities!)

Would you help us spread the blessing?

When you refer someone who subscribes:
üéÅ You get 500 bonus points
üéÅ They get 20% off their first month
üéÅ Together we help more people grow in faith

SHARE NOW:
[FACEBOOK SHARE]
[EMAIL SHARE]
[COPY REFERRAL LINK]

Your unique link: [REFERRAL_LINK]

Thank you for being part of our ministry!

Blessings,
Elder Robert Chalk Jr.
                `
            }
        };

        // ===================================
        // EXERCISE TYPES (20 Total)
        // ===================================
        const exerciseTypes = [
            { id: 'fillBlank', name: 'Fill in the Blank', icon: 'üìù', category: 'Memory' },
            { id: 'verseMatch', name: 'Verse Matching', icon: 'üîó', category: 'Memory' },
            { id: 'trueFalse', name: 'True or False', icon: '‚úì‚úó', category: 'Knowledge' },
            { id: 'multipleChoice', name: 'Multiple Choice', icon: 'üìä', category: 'Knowledge' },
            { id: 'characterQuiz', name: 'Character Quiz', icon: 'üë§', category: 'Knowledge' },
            { id: 'placesQuiz', name: 'Places Quiz', icon: 'üó∫Ô∏è', category: 'Knowledge' },
            { id: 'storySequence', name: 'Story Sequencing', icon: 'üìö', category: 'Memory' },
            { id: 'numberMemory', name: 'Number Memory', icon: 'üî¢', category: 'Memory' },
            { id: 'parables', name: 'Parables', icon: 'üå±', category: 'Knowledge' },
            { id: 'prophets', name: 'Prophet Identification', icon: 'üë®‚Äçü¶≥', category: 'Knowledge' },
            { id: 'miracles', name: 'Miracle Sequencing', icon: '‚ú®', category: 'Memory' },
            { id: 'timeline', name: 'Timeline Events', icon: '‚è∞', category: 'Memory' },
            { id: 'wordRecall', name: 'Word Recall', icon: 'üí≠', category: 'Memory' },
            { id: 'psalmMemory', name: 'Psalm Memory', icon: 'üéµ', category: 'Memory' },
            { id: 'prayer', name: 'Prayer Elements', icon: 'üôè', category: 'Knowledge' },
            { id: 'fruitSpirit', name: 'Fruit of Spirit', icon: 'üçá', category: 'Knowledge' },
            { id: 'commandments', name: 'Commandments', icon: 'üìú', category: 'Knowledge' },
            { id: 'genealogy', name: 'Genealogy Memory', icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', category: 'Memory' },
            { id: 'beatitudes', name: 'Beatitudes', icon: 'üòá', category: 'Knowledge' },
            { id: 'disciples', name: 'Disciples Recognition', icon: 'üë•', category: 'Knowledge' }
        ];

        // ===================================
        // ACTIVITIES DATABASE (600 Total - 30 per exercise)
        // ===================================
        const activities = {
            fillBlank: [
                // BEGINNER (10)
                {instruction:"FILL IN THE BLANK",v:"For God so loved the world, that he gave his only begotten ___",a:"Son",r:"John 3:16",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"I can do all things through Christ which ___ me",a:"strengtheneth",r:"Philippians 4:13",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"The Lord is my ___; I shall not want",a:"shepherd",r:"Psalm 23:1",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"Trust in the Lord with all thine ___",a:"heart",r:"Proverbs 3:5",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"Be still, and know that I am ___",a:"God",r:"Psalm 46:10",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"The Lord is my light and my ___",a:"salvation",r:"Psalm 27:1",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"Give thanks unto the Lord, for he is ___",a:"good",r:"Psalm 107:1",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"In the beginning ___ created the heaven and the earth",a:"God",r:"Genesis 1:1",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"God is ___",a:"love",r:"1 John 4:8",d:"beginner"},
                {instruction:"FILL IN THE BLANK",v:"Pray without ___",a:"ceasing",r:"1 Thessalonians 5:17",d:"beginner"},
                // INTERMEDIATE (10)
                {v:"Cast all your ___ upon him; for he careth for you",a:"care",r:"1 Peter 5:7",d:"intermediate"},
                {v:"Your word is a ___ unto my feet",a:"lamp",r:"Psalm 119:105",d:"intermediate"},
                {v:"For we walk by ___, not by sight",a:"faith",r:"2 Corinthians 5:7",d:"intermediate"},
                {v:"If God is for us, who can be ___ us",a:"against",r:"Romans 8:31",d:"intermediate"},
                {v:"And we know that in all things God works for the ___",a:"good",r:"Romans 8:28",d:"intermediate"},
                {v:"Be kind and ___ to one another",a:"compassionate",r:"Ephesians 4:32",d:"intermediate"},
                {v:"But seek first his kingdom and his ___",a:"righteousness",r:"Matthew 6:33",d:"intermediate"},
                {v:"The Lord your God is with you, the Mighty Warrior who ___",a:"saves",r:"Zephaniah 3:17",d:"intermediate"},
                {v:"Do not be anxious about ___",a:"anything",r:"Philippians 4:6",d:"intermediate"},
                {v:"The Lord goes ___ you",a:"before",r:"Deuteronomy 31:8",d:"intermediate"},
                // EXPERT (10)
                {v:"Do not conform to the pattern of this world, but be ___",a:"transformed",r:"Romans 12:2",d:"expert"},
                {v:"For it is by ___ you have been saved",a:"grace",r:"Ephesians 2:8",d:"expert"},
                {v:"The Lord will fight for you; you need only to be ___",a:"still",r:"Exodus 14:14",d:"expert"},
                {v:"But those who hope in the Lord will renew their ___",a:"strength",r:"Isaiah 40:31",d:"expert"},
                {v:"The Lord is close to the ___",a:"brokenhearted",r:"Psalm 34:18",d:"expert"},
                {v:"Commit to the Lord whatever you do, and he will establish your ___",a:"plans",r:"Proverbs 16:3",d:"expert"},
                {v:"Whatever is true, whatever is noble, whatever is ___",a:"right",r:"Philippians 4:8",d:"expert"},
                {v:"For the Spirit God gave us does not make us timid, but gives us power, love and ___",a:"self-discipline",r:"2 Timothy 1:7",d:"expert"},
                {v:"Let us not become ___ in doing good",a:"weary",r:"Galatians 6:9",d:"expert"},
                {v:"Take delight in the Lord, and he will give you the desires of your ___",a:"heart",r:"Psalm 37:4",d:"expert"}
            ],
            
            verseMatch: [
                // BEGINNER (10)
                {q:"Match the verse: 'For God so loved the world'",a:"John 3:16",d:"beginner"},
                {q:"Match the verse: 'The Lord is my shepherd'",a:"Psalm 23:1",d:"beginner"},
                {q:"Match the verse: 'I can do all things through Christ'",a:"Philippians 4:13",d:"beginner"},
                {q:"Match the verse: 'In the beginning God created'",a:"Genesis 1:1",d:"beginner"},
                {q:"Match the verse: 'God is love'",a:"1 John 4:8",d:"beginner"},
                {q:"Match the verse: 'Trust in the Lord'",a:"Proverbs 3:5",d:"beginner"},
                {q:"Match the verse: 'Be still and know'",a:"Psalm 46:10",d:"beginner"},
                {q:"Match the verse: 'Give thanks to the Lord'",a:"Psalm 107:1",d:"beginner"},
                {q:"Match the verse: 'Pray without ceasing'",a:"1 Thessalonians 5:17",d:"beginner"},
                {q:"Match the verse: 'The Lord is my light'",a:"Psalm 27:1",d:"beginner"},
                // INTERMEDIATE (10)
                {q:"Match the verse: 'Cast all your cares upon him'",a:"1 Peter 5:7",d:"intermediate"},
                {q:"Match the verse: 'We walk by faith not by sight'",a:"2 Corinthians 5:7",d:"intermediate"},
                {q:"Match the verse: 'All things work together for good'",a:"Romans 8:28",d:"intermediate"},
                {q:"Match the verse: 'If God is for us'",a:"Romans 8:31",d:"intermediate"},
                {q:"Match the verse: 'Seek first the kingdom'",a:"Matthew 6:33",d:"intermediate"},
                {q:"Match the verse: 'Be kind and compassionate'",a:"Ephesians 4:32",d:"intermediate"},
                {q:"Match the verse: 'Your word is a lamp'",a:"Psalm 119:105",d:"intermediate"},
                {q:"Match the verse: 'Do not be anxious'",a:"Philippians 4:6",d:"intermediate"},
                {q:"Match the verse: 'The Lord goes before you'",a:"Deuteronomy 31:8",d:"intermediate"},
                {q:"Match the verse: 'The Lord is my strength'",a:"Exodus 15:2",d:"intermediate"},
                // EXPERT (10)
                {q:"Match the verse: 'Be transformed by renewing'",a:"Romans 12:2",d:"expert"},
                {q:"Match the verse: 'By grace you have been saved'",a:"Ephesians 2:8",d:"expert"},
                {q:"Match the verse: 'The Lord will fight for you'",a:"Exodus 14:14",d:"expert"},
                {q:"Match the verse: 'Those who hope renew strength'",a:"Isaiah 40:31",d:"expert"},
                {q:"Match the verse: 'Close to the brokenhearted'",a:"Psalm 34:18",d:"expert"},
                {q:"Match the verse: 'Commit to the Lord'",a:"Proverbs 16:3",d:"expert"},
                {q:"Match the verse: 'Think on these things'",a:"Philippians 4:8",d:"expert"},
                {q:"Match the verse: 'Spirit of power and love'",a:"2 Timothy 1:7",d:"expert"},
                {q:"Match the verse: 'Not weary in doing good'",a:"Galatians 6:9",d:"expert"},
                {q:"Match the verse: 'Delight in the Lord'",a:"Psalm 37:4",d:"expert"}
            ],
            
            trueFalse: [
                // BEGINNER (10)
                {instruction:"TRUE OR FALSE",q:"Jesus was born in Bethlehem",a:"true",r:"Luke 2:4-7",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Moses parted the Red Sea",a:"true",r:"Exodus 14:21",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"David fought Goliath with a sword",a:"false",r:"1 Samuel 17:50 (sling and stone)",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"There are 12 apostles",a:"true",r:"Matthew 10:1-4",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Noah built a tower",a:"false",r:"Genesis 11:4 (That was Babel)",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Jesus walked on water",a:"true",r:"Matthew 14:25",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Adam and Eve lived in the Garden of Eden",a:"true",r:"Genesis 2:8",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Jonah was swallowed by a whale",a:"true",r:"Jonah 1:17",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Jesus had 7 brothers",a:"false",r:"Matthew 13:55-56 (had siblings but not 7 brothers)",d:"beginner"},
                {instruction:"TRUE OR FALSE",q:"Mary was Jesus' mother",a:"true",r:"Matthew 1:18",d:"beginner"},
                // INTERMEDIATE (10)
                {instruction:"TRUE OR FALSE",q:"Paul was originally named Saul",a:"true",r:"Acts 13:9",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Daniel was thrown into a lion's den",a:"true",r:"Daniel 6:16",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Peter denied Jesus twice",a:"false",r:"Matthew 26:34 (three times)",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"The first miracle was turning water into wine",a:"true",r:"John 2:11",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Job's wife encouraged him to trust God",a:"false",r:"Job 2:9 (she told him to curse God)",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Solomon was known for his wisdom",a:"true",r:"1 Kings 3:12",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Esther was a queen",a:"true",r:"Esther 2:17",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Jesus was baptized in the Jordan River",a:"true",r:"Matthew 3:13",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Abraham had 5 sons",a:"false",r:"Genesis 25:1-2",d:"intermediate"},
                {instruction:"TRUE OR FALSE",q:"Moses saw the burning bush",a:"true",r:"Exodus 3:2",d:"intermediate"},
                // EXPERT (10)
                {instruction:"TRUE OR FALSE",q:"Paul wrote the book of Hebrews",a:"false",r:"Unknown author",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"There are 66 books in the Bible",a:"true",r:"39 Old + 27 New Testament",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"Methuselah lived 969 years",a:"true",r:"Genesis 5:27",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"Jesus was tempted 40 days",a:"true",r:"Matthew 4:2",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"Judas betrayed Jesus for 50 pieces of silver",a:"false",r:"Matthew 26:15 (30 pieces)",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"The Bible was originally written in English",a:"false",r:"Hebrew and Greek",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"John the Baptist baptized Jesus",a:"true",r:"Matthew 3:13-16",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"Samson's strength was in his hair",a:"true",r:"Judges 16:17",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"Ruth was the mother-in-law of Naomi",a:"false",r:"Ruth 1:4 (daughter-in-law)",d:"expert"},
                {instruction:"TRUE OR FALSE",q:"The Bible has two testaments",a:"true",r:"Old and New Testament",d:"expert"}
            ],
            
            multipleChoice: [
                // BEGINNER (10)
                {instruction:"MULTIPLE CHOICE",q:"Who built the ark?",o:["Noah","Moses","Abraham","David"],a:"Noah",r:"Genesis 6:14",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Who was swallowed by a great fish?",o:["Jonah","Daniel","Peter","John"],a:"Jonah",r:"Jonah 1:17",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Who was Jesus' mother?",o:["Mary","Martha","Elizabeth","Ruth"],a:"Mary",r:"Luke 1:27",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Where was Jesus born?",o:["Bethlehem","Nazareth","Jerusalem","Egypt"],a:"Bethlehem",r:"Luke 2:4-7",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Who fought Goliath?",o:["David","Saul","Jonathan","Samuel"],a:"David",r:"1 Samuel 17:49-50",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"How many apostles did Jesus choose?",o:["12","7","10","5"],a:"12",r:"Matthew 10:1",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Who led Israel out of Egypt?",o:["Moses","Aaron","Joshua","David"],a:"Moses",r:"Exodus 3:10",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"What did God create first?",o:["Light","Earth","Sky","Water"],a:"Light",r:"Genesis 1:3",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Who was the first man?",o:["Adam","Noah","Abraham","Moses"],a:"Adam",r:"Genesis 2:7",d:"beginner"},
                {instruction:"MULTIPLE CHOICE",q:"Who denied Jesus three times?",o:["Peter","John","James","Thomas"],a:"Peter",r:"Matthew 26:34,69-75",d:"beginner"},
                // INTERMEDIATE (10)
                {q:"Who was known for wisdom?",o:["Solomon","David","Samuel","Isaiah"],a:"Solomon",d:"intermediate"},
                {q:"Who was thrown in a lion's den?",o:["Daniel","David","Joseph","Samson"],a:"Daniel",d:"intermediate"},
                {q:"How many days did Jesus fast?",o:["40","30","50","70"],a:"40",d:"intermediate"},
                {q:"Who walked on water?",o:["Jesus","Peter","Both","Neither"],a:"Both",d:"intermediate"},
                {q:"Who was the first king of Israel?",o:["Saul","David","Solomon","Samuel"],a:"Saul",d:"intermediate"},
                {q:"What was Paul's original name?",o:["Saul","Simon","Stephen","Samuel"],a:"Saul",d:"intermediate"},
                {q:"Who was a tax collector?",o:["Matthew","Mark","Luke","John"],a:"Matthew",d:"intermediate"},
                {q:"Where did Jesus perform his first miracle?",o:["Cana","Nazareth","Bethlehem","Capernaum"],a:"Cana",d:"intermediate"},
                {q:"Who betrayed Jesus?",o:["Judas","Peter","Thomas","Matthew"],a:"Judas",d:"intermediate"},
                {q:"Who was Moses' brother?",o:["Aaron","Joshua","Caleb","Hur"],a:"Aaron",d:"intermediate"},
                // EXPERT (10)
                {q:"How many books are in the New Testament?",o:["27","39","66","22"],a:"27",d:"expert"},
                {q:"Who wrote most of the Psalms?",o:["David","Solomon","Moses","Asaph"],a:"David",d:"expert"},
                {q:"What is the shortest verse in the Bible?",o:["Jesus wept","God is love","Pray always","Be still"],a:"Jesus wept",d:"expert"},
                {q:"Who lived 969 years?",o:["Methuselah","Adam","Noah","Seth"],a:"Methuselah",d:"expert"},
                {q:"How many plagues on Egypt?",o:["10","7","12","40"],a:"10",d:"expert"},
                {q:"Who was a judge and prophet?",o:["Samuel","Saul","David","Solomon"],a:"Samuel",d:"expert"},
                {q:"What is the last book of Bible?",o:["Revelation","Jude","3 John","Acts"],a:"Revelation",d:"expert"},
                {q:"Who wrote Revelation?",o:["John","Paul","Peter","James"],a:"John",d:"expert"},
                {q:"How many days was Lazarus dead?",o:["4","3","7","2"],a:"4",d:"expert"},
                {q:"Who climbed a tree to see Jesus?",o:["Zacchaeus","Peter","John","James"],a:"Zacchaeus",d:"expert"}
            ],
            
            characterQuiz: [
                // BEGINNER (10)
                {q:"Who was the first man created?",a:"Adam",d:"beginner"},
                {q:"Who was the mother of Jesus?",a:"Mary",d:"beginner"},
                {q:"Who built the ark?",a:"Noah",d:"beginner"},
                {q:"Who defeated Goliath?",a:"David",d:"beginner"},
                {q:"Who was swallowed by a fish?",a:"Jonah",d:"beginner"},
                {q:"Who led Israel out of Egypt?",a:"Moses",d:"beginner"},
                {q:"Who was the strongest man?",a:"Samson",d:"beginner"},
                {q:"Who was Jesus' earthly father?",a:"Joseph",d:"beginner"},
                {q:"Who was thrown into lions' den?",a:"Daniel",d:"beginner"},
                {q:"Who denied Jesus three times?",a:"Peter",d:"beginner"},
                // INTERMEDIATE (10)
                {q:"Who was known for great wisdom?",a:"Solomon",d:"intermediate"},
                {q:"Who was the first king of Israel?",a:"Saul",d:"intermediate"},
                {q:"Who was Paul before conversion?",a:"Saul",d:"intermediate"},
                {q:"Who was the oldest man in Bible?",a:"Methuselah",d:"intermediate"},
                {q:"Who was faithful Job's wife?",a:"Wife of Job",d:"intermediate"},
                {q:"Who was Ruth's mother-in-law?",a:"Naomi",d:"intermediate"},
                {q:"Who was the doubting disciple?",a:"Thomas",d:"intermediate"},
                {q:"Who baptized Jesus?",a:"John the Baptist",d:"intermediate"},
                {q:"Who climbed tree to see Jesus?",a:"Zacchaeus",d:"intermediate"},
                {q:"Who was the first martyr?",a:"Stephen",d:"intermediate"},
                // EXPERT (10)
                {q:"Who was the weeping prophet?",a:"Jeremiah",d:"expert"},
                {q:"Who was Abraham's first son?",a:"Ishmael",d:"expert"},
                {q:"Who was David's best friend?",a:"Jonathan",d:"expert"},
                {q:"Who was Moses' successor?",a:"Joshua",d:"expert"},
                {q:"Who interpreted Pharaoh's dream?",a:"Joseph",d:"expert"},
                {q:"Who was Esther's cousin?",a:"Mordecai",d:"expert"},
                {q:"Who was the Queen of Sheba visiting?",a:"Solomon",d:"expert"},
                {q:"Who was called to preach to Nineveh?",a:"Jonah",d:"expert"},
                {q:"Who was the father of John Baptist?",a:"Zacharias",d:"expert"},
                {q:"Who was healed of leprosy by Elisha?",a:"Naaman",d:"expert"}
            ],
            
            placesQuiz: [
                // BEGINNER (10)
                {q:"Where was Jesus born?",a:"Bethlehem",d:"beginner"},
                {q:"Where did Adam and Eve live?",a:"Garden of Eden",d:"beginner"},
                {q:"Where was Jesus baptized?",a:"Jordan River",d:"beginner"},
                {q:"Where did Moses receive commandments?",a:"Mount Sinai",d:"beginner"},
                {q:"Where was Jesus crucified?",a:"Golgotha",d:"beginner"},
                {q:"Where did Noah's ark land?",a:"Mount Ararat",d:"beginner"},
                {q:"Where did Jesus grow up?",a:"Nazareth",d:"beginner"},
                {q:"Where did Jonah try to flee?",a:"Tarshish",d:"beginner"},
                {q:"Where was the temple built?",a:"Jerusalem",d:"beginner"},
                {q:"Where did Jesus perform first miracle?",a:"Cana",d:"beginner"},
                // INTERMEDIATE (10)
                {q:"Where was Paul converted?",a:"Damascus",d:"intermediate"},
                {q:"Where was Daniel thrown?",a:"Lions' Den",d:"intermediate"},
                {q:"Where did Israelites cross on dry ground?",a:"Red Sea",d:"intermediate"},
                {q:"Where was Jesus transfigured?",a:"Mount of Transfiguration",d:"intermediate"},
                {q:"Where did David fight Goliath?",a:"Valley of Elah",d:"intermediate"},
                {q:"Where was Pentecost celebrated?",a:"Jerusalem",d:"intermediate"},
                {q:"Where was Paul shipwrecked?",a:"Malta",d:"intermediate"},
                {q:"Where did Elijah have contest?",a:"Mount Carmel",d:"intermediate"},
                {q:"Where was Jacob's ladder seen?",a:"Bethel",d:"intermediate"},
                {q:"Where were disciples first called Christians?",a:"Antioch",d:"intermediate"},
                // EXPERT (10)
                {q:"Where was the ark of covenant captured?",a:"Ebenezer",d:"expert"},
                {q:"Where did Ruth glean grain?",a:"Bethlehem",d:"expert"},
                {q:"Where was Lazarus from?",a:"Bethany",d:"expert"},
                {q:"Where did Jesus weep over?",a:"Jerusalem",d:"expert"},
                {q:"Where was Saul made king?",a:"Gilgal",d:"expert"},
                {q:"Where did Abraham almost sacrifice Isaac?",a:"Mount Moriah",d:"expert"},
                {q:"Where was Jesus tempted?",a:"Wilderness",d:"expert"},
                {q:"Where did Moses see burning bush?",a:"Mount Horeb",d:"expert"},
                {q:"Where was Paul from?",a:"Tarsus",d:"expert"},
                {q:"Where were Shadrach, Meshach, Abednego thrown?",a:"Fiery Furnace",d:"expert"}
            ],
            
            storySequence: [
                // BEGINNER (10)
                {s:"Creation Story",e:["God created light","God created animals","God created man"],a:"1,2,3",d:"beginner"},
                {s:"Noah's Ark",e:["God told Noah to build ark","Rain came 40 days","Ark landed on mountain"],a:"1,2,3",d:"beginner"},
                {s:"David and Goliath",e:["David took 5 stones","David defeated Goliath","David became king"],a:"1,2,3",d:"beginner"},
                {s:"Moses and Egypt",e:["Moses born","Moses led exodus","Moses received commandments"],a:"1,2,3",d:"beginner"},
                {s:"Jesus Birth",e:["Angel visited Mary","Jesus born in Bethlehem","Wise men visited"],a:"1,2,3",d:"beginner"},
                {s:"Jonah Story",e:["Jonah fled from God","Jonah swallowed by fish","Jonah preached to Nineveh"],a:"1,2,3",d:"beginner"},
                {s:"Joseph Story",e:["Joseph sold by brothers","Joseph imprisoned","Joseph became ruler"],a:"1,2,3",d:"beginner"},
                {s:"Daniel",e:["Daniel served king","Daniel prayed","Daniel thrown to lions"],a:"1,2,3",d:"beginner"},
                {s:"Good Samaritan",e:["Man beaten by robbers","Priest passed by","Samaritan helped"],a:"1,2,3",d:"beginner"},
                {s:"Prodigal Son",e:["Son left home","Son lost everything","Father welcomed son back"],a:"1,2,3",d:"beginner"},
                // INTERMEDIATE (10)
                {s:"Ruth's Story",e:["Ruth left Moab","Ruth gleaned grain","Ruth married Boaz"],a:"1,2,3",d:"intermediate"},
                {s:"Esther",e:["Esther became queen","Haman plotted evil","Esther saved her people"],a:"1,2,3",d:"intermediate"},
                {s:"Peter's Denial",e:["Jesus predicted denial","Peter denied 3 times","Peter wept bitterly"],a:"1,2,3",d:"intermediate"},
                {s:"Jesus Crucifixion",e:["Jesus arrested","Jesus crucified","Jesus rose again"],a:"1,2,3",d:"intermediate"},
                {s:"Paul's Conversion",e:["Paul persecuted Christians","Jesus appeared to Paul","Paul became apostle"],a:"1,2,3",d:"intermediate"},
                {s:"Samson",e:["Samson had great strength","Delilah betrayed Samson","Samson destroyed temple"],a:"1,2,3",d:"intermediate"},
                {s:"Abraham and Isaac",e:["God tested Abraham","Abraham took Isaac","Angel stopped Abraham"],a:"1,2,3",d:"intermediate"},
                {s:"Elijah",e:["Elijah challenged prophets","Fire came from heaven","Prophets defeated"],a:"1,2,3",d:"intermediate"},
                {s:"Job's Trial",e:["Job was righteous","Satan tested Job","God restored Job"],a:"1,2,3",d:"intermediate"},
                {s:"Feeding 5000",e:["Crowd gathered","Boy gave loaves","All were fed"],a:"1,2,3",d:"intermediate"},
                // EXPERT (10)
                {s:"Tower of Babel",e:["People built tower","God confused language","People scattered"],a:"1,2,3",d:"expert"},
                {s:"Jacob's Journey",e:["Jacob deceived father","Jacob fled","Jacob wrestled with God"],a:"1,2,3",d:"expert"},
                {s:"Moses' Call",e:["Moses saw burning bush","Moses doubted","God sent Moses"],a:"1,2,3",d:"expert"},
                {s:"Gideon",e:["Angel called Gideon","Gideon tested God","Gideon defeated enemy"],a:"1,2,3",d:"expert"},
                {s:"Solomon's Wisdom",e:["Solomon asked wisdom","Two women came","Solomon judged wisely"],a:"1,2,3",d:"expert"},
                {s:"Nehemiah",e:["Nehemiah heard report","Nehemiah returned","Wall rebuilt"],a:"1,2,3",d:"expert"},
                {s:"Pentecost",e:["Disciples gathered","Holy Spirit came","Peter preached"],a:"1,2,3",d:"expert"},
                {s:"Stephen",e:["Stephen preached","Leaders angry","Stephen martyred"],a:"1,2,3",d:"expert"},
                {s:"Philip and Ethiopian",e:["Angel sent Philip","Philip explained Isaiah","Ethiopian baptized"],a:"1,2,3",d:"expert"},
                {s:"Peter's Vision",e:["Peter saw vision","Peter preached to Gentiles","Gentiles received Spirit"],a:"1,2,3",d:"expert"}
            ],
            
            numberMemory: [
                // BEGINNER (10)
                {q:"How many disciples did Jesus choose?",a:"12",d:"beginner"},
                {q:"How many days did Jesus fast?",a:"40",d:"beginner"},
                {q:"How many commandments did Moses receive?",a:"10",d:"beginner"},
                {q:"How many days was Jonah in the fish?",a:"3",d:"beginner"},
                {q:"How many days of creation?",a:"6",d:"beginner"},
                {q:"How many plagues on Egypt?",a:"10",d:"beginner"},
                {q:"How many sons did Jacob have?",a:"12",d:"beginner"},
                {q:"How many people on Noah's ark?",a:"8",d:"beginner"},
                {q:"How many stones did David take?",a:"5",d:"beginner"},
                {q:"How many times did Peter deny Jesus?",a:"3",d:"beginner"},
                // INTERMEDIATE (10)
                {q:"How many years did Israelites wander?",a:"40",d:"intermediate"},
                {q:"How many books in New Testament?",a:"27",d:"intermediate"},
                {q:"How many apostles replaced Judas?",a:"1",d:"intermediate"},
                {q:"How many days after resurrection to ascension?",a:"40",d:"intermediate"},
                {q:"How many baskets after feeding 5000?",a:"12",d:"intermediate"},
                {q:"How many lepers healed?",a:"10",d:"intermediate"},
                {q:"How many chapters in Psalms?",a:"150",d:"intermediate"},
                {q:"How old was Jesus at ministry start?",a:"30",d:"intermediate"},
                {q:"How many pieces of silver for Judas?",a:"30",d:"intermediate"},
                {q:"How many days did Lazarus lie in tomb?",a:"4",d:"intermediate"},
                // EXPERT (10)
                {q:"How many years did Methuselah live?",a:"969",d:"expert"},
                {q:"How many books in the Bible?",a:"66",d:"expert"},
                {q:"How many years to build Solomon's temple?",a:"7",d:"expert"},
                {q:"How many generations Abraham to David?",a:"14",d:"expert"},
                {q:"How many fish caught after resurrection?",a:"153",d:"expert"},
                {q:"How many righteous needed to spare Sodom?",a:"10",d:"expert"},
                {q:"How many times Naaman wash in Jordan?",a:"7",d:"expert"},
                {q:"How many years Jacob served for Rachel?",a:"14",d:"expert"},
                {q:"How many chapters in Isaiah?",a:"66",d:"expert"},
                {q:"How many people on ship in Paul's shipwreck?",a:"276",d:"expert"}
            ],
            
            parables: [
                // BEGINNER (10)
                {q:"Parable of the ___",a:"Sower",t:"Seeds falling on different soils",d:"beginner"},
                {q:"Parable of the ___",a:"Lost Sheep",t:"Shepherd finding lost sheep",d:"beginner"},
                {q:"Parable of the ___",a:"Prodigal Son",t:"Son returning to father",d:"beginner"},
                {q:"Parable of the ___",a:"Good Samaritan",t:"Helping injured traveler",d:"beginner"},
                {q:"Parable of the ___",a:"Mustard Seed",t:"Small seed growing large",d:"beginner"},
                {q:"Parable of the ___",a:"Lost Coin",t:"Woman finding lost coin",d:"beginner"},
                {q:"Parable of the ___",a:"Two Sons",t:"One obeys, one doesn't",d:"beginner"},
                {q:"Parable of the ___",a:"Great Banquet",t:"Inviting guests to feast",d:"beginner"},
                {q:"Parable of the ___",a:"Rich Fool",t:"Building bigger barns",d:"beginner"},
                {q:"Parable of the ___",a:"Pharisee and Tax Collector",t:"Prayer and humility",d:"beginner"},
                // INTERMEDIATE (10)
                {q:"Parable of the ___",a:"Ten Virgins",t:"Being ready for bridegroom",d:"intermediate"},
                {q:"Parable of the ___",a:"Talents",t:"Investing what we're given",d:"intermediate"},
                {q:"Parable of the ___",a:"Wheat and Tares",t:"Good and bad growing together",d:"intermediate"},
                {q:"Parable of the ___",a:"Pearl of Great Price",t:"Selling all for one pearl",d:"intermediate"},
                {q:"Parable of the ___",a:"Unforgiving Servant",t:"Refusing to forgive debt",d:"intermediate"},
                {q:"Parable of the ___",a:"Workers in Vineyard",t:"All receive same wage",d:"intermediate"},
                {q:"Parable of the ___",a:"Hidden Treasure",t:"Finding treasure in field",d:"intermediate"},
                {q:"Parable of the ___",a:"Wicked Tenants",t:"Tenants killing owner's son",d:"intermediate"},
                {q:"Parable of the ___",a:"Fig Tree",t:"Looking for fruit",d:"intermediate"},
                {q:"Parable of the ___",a:"Net",t:"Catching good and bad fish",d:"intermediate"},
                // EXPERT (10)
                {q:"Parable of the ___",a:"Persistent Widow",t:"Seeking justice from judge",d:"expert"},
                {q:"Parable of the ___",a:"Shrewd Manager",t:"Managing master's accounts",d:"expert"},
                {q:"Parable of the ___",a:"Rich Man and Lazarus",t:"Afterlife reversal",d:"expert"},
                {q:"Parable of the ___",a:"Friend at Midnight",t:"Persistent knocking",d:"expert"},
                {q:"Parable of the ___",a:"Pharisee's Dinner",t:"Choosing seat of honor",d:"expert"},
                {q:"Parable of the ___",a:"Lost Sheep (extended)",t:"Leaving 99 for one",d:"expert"},
                {q:"Parable of the ___",a:"Wedding Banquet",t:"Wedding garments required",d:"expert"},
                {q:"Parable of the ___",a:"Unmerciful Servant",t:"Debt forgiveness refused",d:"expert"},
                {q:"Parable of the ___",a:"Budding Fig Tree",t:"Signs of the times",d:"expert"},
                {q:"Parable of the ___",a:"Faithful Steward",t:"Wise and faithful manager",d:"expert"}
            ]
        };

        // Add placeholder activities for remaining 11 exercise types (30 each = 330 total)
        const remainingExercises = ['prophets','miracles','timeline','wordRecall','psalmMemory','prayer','fruitSpirit','commandments','genealogy','beatitudes','disciples'];
        
        remainingExercises.forEach(ex => {
            activities[ex] = [];
            for (let i = 1; i <= 30; i++) {
                const difficulty = i <= 10 ? 'beginner' : i <= 20 ? 'intermediate' : 'expert';
                activities[ex].push({
                    q: `${ex} activity ${i} (${difficulty})`,
                    a: `answer${i}`,
                    d: difficulty
                });
            }
        });

        // ===================================
        // AUTHENTICATION
        // ===================================
        
        function handleLogin() {
            const username = document.getElementById('usernameInput').value.trim();
            const email = document.getElementById('emailInput').value.trim();
            const password = document.getElementById('passwordInput').value.trim();
            const emailOptIn = document.getElementById('emailOptIn').checked;
            
            if (!username) {
                alert('Please enter a username');
                return;
            }
            
            if (!email) {
                alert('Please enter your email address for account recovery and updates');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Check if user exists
            if (users[username]) {
                // Existing user
                if (password && users[username].password !== password) {
                    alert('Incorrect password');
                    return;
                }
                currentUser = users[username];
                
                // Update email if changed
                if (currentUser.email !== email) {
                    currentUser.email = email;
                    currentUser.emailOptIn = emailOptIn;
                    saveData();
                }
            } else {
                // New user - create account
                currentUser = {
                    username: username,
                    email: email,
                    emailOptIn: emailOptIn,
                    password: password || '',
                    createdDate: new Date().toISOString(),
                    accountType: 'trial', // trial, premium, family, lifetime
                    trialStartDate: new Date().toISOString(),
                    trialDays: 7,
                    points: 0,
                    streak: 0,
                    completed: 0,
                    lifetimeCode: null,
                    progress: {}
                };
                users[username] = currentUser;
                saveData();
                
                // Send welcome email (track for email service)
                trackEmailEvent('user_registered', {
                    username: username,
                    email: email,
                    optIn: emailOptIn,
                    date: new Date().toISOString()
                });
            }
            
            showDashboard();
        }

        function showDashboard() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('dashboardScreen').classList.remove('hidden');
            
            // Update welcome message
            const t = translations[currentLanguage];
            document.getElementById('welcomeMessage').textContent = `${t.welcome}, ${currentUser.username}!`;
            
            // Show lifetime badge if applicable
            if (currentUser.accountType === 'lifetime') {
                document.getElementById('lifetimeBadge').classList.remove('hidden');
                document.getElementById('lifetimeBadge').innerHTML = 'üëë Lifetime Member';
            } else if (currentUser.accountType === 'family') {
                document.getElementById('lifetimeBadge').classList.remove('hidden');
                if (currentUser.familyOwner) {
                    document.getElementById('lifetimeBadge').innerHTML = `üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Member (Owner: ${currentUser.familyOwner})`;
                    document.getElementById('lifetimeBadge').style.background = 'linear-gradient(135deg, #FF8C00, #FFA500)';
                } else {
                    document.getElementById('lifetimeBadge').innerHTML = 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Plan Owner';
                    document.getElementById('lifetimeBadge').style.background = 'linear-gradient(135deg, #FF8C00, #FFA500)';
                }
            }
            
            // Update stats
            document.getElementById('statPoints').textContent = currentUser.points || 0;
            document.getElementById('statStreak').textContent = currentUser.streak || 0;
            document.getElementById('statCompleted').textContent = currentUser.completed || 0;
            
            // Show trial banner if in trial
            if (currentUser.accountType === 'trial') {
                const trialStart = new Date(currentUser.trialStartDate);
                const now = new Date();
                const daysPassed = Math.floor((now - trialStart) / (1000 * 60 * 60 * 24));
                const daysLeft = 7 - daysPassed;
                
                if (daysLeft > 0) {
                    const banner = document.getElementById('trialBanner');
                    banner.textContent = `‚è∞ ${daysLeft} ${translations[currentLanguage].trialEnding}`;
                    banner.classList.remove('hidden');
                } else {
                    const banner = document.getElementById('trialBanner');
                    banner.textContent = translations[currentLanguage].trialExpired;
                    banner.classList.remove('hidden');
                }
            }
            
            // Check for abandoned cart (trial users nearing expiration)
            checkAbandonedCart();
            
            // Render exercises
            renderExercises();
        }

        function renderExercises() {
            const grid = document.getElementById('exerciseGrid');
            grid.innerHTML = '';
            
            exerciseTypes.forEach((exercise, index) => {
                const isPremium = currentUser.accountType === 'premium' || currentUser.accountType === 'lifetime' || currentUser.accountType === 'family';
                const isTrial = currentUser.accountType === 'trial';
                
                // During trial: unlock first 3 exercises
                const isUnlocked = isPremium || (isTrial && index < 3);
                
                const card = document.createElement('div');
                card.className = `exercise-card ${!isUnlocked ? 'locked' : ''}`;
                card.innerHTML = `
                    <div class="exercise-icon">${exercise.icon}</div>
                    <div class="exercise-title">${exercise.name}</div>
                    <div class="exercise-count">30 activities</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #999;">${exercise.category}</div>
                    ${!isUnlocked ? '<div style="margin-top: 10px; font-size: 24px;">üîí</div>' : ''}
                `;
                
                if (isUnlocked) {
                    card.onclick = () => startExercise(exercise.id);
                } else {
                    card.onclick = () => showUpgradePrompt();
                }
                
                grid.appendChild(card);
            });
        }

        function startExercise(exerciseId) {
            currentExercise = exerciseId;
            currentActivityIndex = 0;
            currentScore = 0;
            
            document.getElementById('dashboardScreen').classList.add('hidden');
            document.getElementById('activityScreen').classList.remove('hidden');
            
            loadActivity();
        }

        function loadActivity() {
            const exerciseActivities = activities[currentExercise];
            
            if (!exerciseActivities || currentActivityIndex >= exerciseActivities.length) {
                showResults();
                return;
            }
            
            const activity = exerciseActivities[currentActivityIndex];
            const content = document.getElementById('activityContent');
            
            // Get instruction text
            const instructionText = activity.instruction || "COMPLETE THE ACTIVITY";
            const progress = `Activity ${currentActivityIndex + 1} of ${exerciseActivities.length}`;
            
            // Show different UI based on exercise type with CLEAR INSTRUCTIONS
            if (currentExercise === 'fillBlank') {
                content.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px; margin-bottom: 30px; text-align: center;">
                        <h2 style="color: white; margin: 0; font-size: 28px; font-weight: bold;">üìù ${instructionText}</h2>
                        <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;">${progress}</p>
                    </div>
                    
                    <span class="difficulty-badge difficulty-${activity.d}" style="font-size: 14px; padding: 8px 16px;">${activity.d.toUpperCase()}</span>
                    
                    <div class="activity-question" style="font-size: 20px; line-height: 1.6; margin: 30px 0; padding: 25px; background: #f8f9fa; border-radius: 10px; border-left: 5px solid #667eea;">
                        ${activity.v}
                    </div>
                    
                    <div style="margin: 25px 0;">
                        <label style="display: block; margin-bottom: 10px; font-weight: bold; color: #333; font-size: 16px;">‚úçÔ∏è Type your answer here:</label>
                        <input type="text" class="activity-input" id="answerInput" placeholder="Your answer..." style="font-size: 18px; padding: 15px;" />
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkAnswer()" style="font-size: 18px; padding: 15px 40px; width: 100%;">${translations[currentLanguage].submit || 'Submit Answer'}</button>
                    
                    <div class="reference" style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <strong>üìñ Scripture Reference:</strong> ${activity.r}
                    </div>
                    
                    <div id="feedback" style="margin-top: 20px; font-size: 18px;"></div>
                `;
            } else if (currentExercise === 'trueFalse') {
                content.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px; margin-bottom: 30px; text-align: center;">
                        <h2 style="color: white; margin: 0; font-size: 28px; font-weight: bold;">‚úì TRUE OR FALSE</h2>
                        <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;">${progress}</p>
                    </div>
                    
                    <span class="difficulty-badge difficulty-${activity.d}" style="font-size: 14px; padding: 8px 16px;">${activity.d.toUpperCase()}</span>
                    
                    <div class="activity-question" style="font-size: 20px; line-height: 1.6; margin: 30px 0; padding: 25px; background: #f8f9fa; border-radius: 10px; border-left: 5px solid #667eea;">
                        ${activity.q}
                    </div>
                    
                    <div style="margin: 25px 0;">
                        <p style="font-weight: bold; color: #333; font-size: 16px; margin-bottom: 15px;">üëÜ Choose your answer:</p>
                        <button class="btn btn-success" style="width: 48%; display: inline-block; font-size: 18px; padding: 20px;" onclick="checkAnswer('true')">‚úì TRUE</button>
                        <button class="btn btn-warning" style="width: 48%; display: inline-block; margin-left: 4%; font-size: 18px; padding: 20px;" onclick="checkAnswer('false')">‚úó FALSE</button>
                    </div>
                    
                    ${activity.r ? `<div class="reference" style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <strong>üìñ Scripture Reference:</strong> ${activity.r}
                    </div>` : ''}
                    
                    <div id="feedback" style="margin-top: 20px; font-size: 18px;"></div>
                `;
            } else {
                // Default layout for other exercises
                content.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px; margin-bottom: 30px; text-align: center;">
                        <h2 style="color: white; margin: 0; font-size: 28px; font-weight: bold;">üìö ${instructionText}</h2>
                        <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;">${progress}</p>
                    </div>
                    
                    <span class="difficulty-badge difficulty-${activity.d}" style="font-size: 14px; padding: 8px 16px;">${activity.d.toUpperCase()}</span>
                    
                    <div class="activity-question" style="font-size: 20px; line-height: 1.6; margin: 30px 0; padding: 25px; background: #f8f9fa; border-radius: 10px; border-left: 5px solid #667eea;">
                        ${activity.q || activity.v}
                    </div>
                    
                    <div style="margin: 25px 0;">
                        <label style="display: block; margin-bottom: 10px; font-weight: bold; color: #333; font-size: 16px;">‚úçÔ∏è Type your answer here:</label>
                        <input type="text" class="activity-input" id="answerInput" placeholder="Your answer..." style="font-size: 18px; padding: 15px;" />
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkAnswer()" style="font-size: 18px; padding: 15px 40px; width: 100%;">${translations[currentLanguage].submit || 'Submit Answer'}</button>
                    
                    ${activity.r ? `<div class="reference" style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <strong>üìñ Scripture Reference:</strong> ${activity.r}
                    </div>` : ''}
                    
                    <div id="feedback" style="margin-top: 20px; font-size: 18px;"></div>
                `;
            }
            
            // Focus input if exists
            const input = document.getElementById('answerInput');
            if (input) input.focus();
        }

        function checkAnswer(providedAnswer) {
            const activity = activities[currentExercise][currentActivityIndex];
            const userAnswer = providedAnswer || document.getElementById('answerInput')?.value.trim().toLowerCase();
            const correctAnswer = activity.a.toLowerCase();
            
            const isCorrect = userAnswer === correctAnswer;
            const feedback = document.getElementById('feedback');
            
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <div style="background: #d4edda; border: 2px solid #28a745; border-radius: 10px; padding: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 10px;">üéâ</div>
                        <div style="font-size: 24px; font-weight: bold; color: #155724; margin-bottom: 5px;">CORRECT!</div>
                        <div style="font-size: 18px; color: #155724;">Great job! You earned 10 points!</div>
                    </div>
                `;
                currentScore += 10;
                currentUser.points += 10;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `
                    <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 10px; padding: 20px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 10px;">üí°</div>
                        <div style="font-size: 20px; font-weight: bold; color: #856404; margin-bottom: 10px;">Let's Learn Together!</div>
                        <div style="font-size: 18px; color: #856404; margin-bottom: 15px;">The correct answer is:</div>
                        <div style="font-size: 24px; font-weight: bold; color: #856404; background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">${activity.a}</div>
                    </div>
                `;
            }
            
            saveData();
            
            setTimeout(() => {
                currentActivityIndex++;
                if (currentActivityIndex < activities[currentExercise].length) {
                    loadActivity();
                } else {
                    showResults();
                }
            }, 5000); // 5 seconds for users to read and absorb the answer
        }

        function showResults() {
            currentUser.completed++;
            saveData();
            
            const content = document.getElementById('activityContent');
            content.innerHTML = `
                <div style="text-align: center;">
                    <h2 style="color: #764ba2; margin-bottom: 20px;">üéâ Exercise Complete!</h2>
                    <div class="stat-value">${currentScore}</div>
                    <div class="stat-label">Points Earned</div>
                    <button class="btn btn-primary" onclick="exitActivity()" style="margin-top: 30px;">Back to Dashboard</button>
                </div>
            `;
        }

        function exitActivity() {
            document.getElementById('activityScreen').classList.add('hidden');
            document.getElementById('dashboardScreen').classList.remove('hidden');
            showDashboard();
        }

        function showUpgradePrompt() {
            alert('This exercise is locked. Please subscribe to access all activities!');
        }

        // ===================================
        // LIFETIME CODE FUNCTIONS
        // ===================================
        function showLifetimeCodeModal() {
            const modal = document.getElementById('lifetimeCodeModal');
            modal.classList.remove('hidden');
            modal.style.display = 'flex';
        }
        
        function closeLifetimeCodeModal() {
            const modal = document.getElementById('lifetimeCodeModal');
            modal.classList.add('hidden');
            modal.style.display = 'none';
            document.getElementById('lifetimeUsername').value = '';
            document.getElementById('lifetimeCode').value = '';
        }
        
        function activateLifetimeCode() {
            const username = document.getElementById('lifetimeUsername').value.trim();
            const code = document.getElementById('lifetimeCode').value.trim().toUpperCase();
            
            if (!username) {
                alert('Please enter a username');
                return;
            }
            
            if (!code) {
                alert('Please enter a lifetime code');
                return;
            }
            
            // Find the code
            const codeObj = lifetimeCodes.find(c => c.code === code);
            
            if (!codeObj) {
                alert('Invalid code. Please check and try again.');
                return;
            }
            
            if (codeObj.used) {
                alert('This code has already been used.');
                return;
            }
            
            // Create or update user
            if (!users[username]) {
                users[username] = {
                    username: username,
                    password: '',
                    createdDate: new Date().toISOString(),
                    accountType: 'lifetime',
                    lifetimeCode: code,
                    points: 0,
                    streak: 0,
                    completed: 0,
                    progress: {}
                };
            } else {
                users[username].accountType = 'lifetime';
                users[username].lifetimeCode = code;
            }
            
            // Mark code as used
            codeObj.used = true;
            codeObj.usedBy = username;
            codeObj.usedDate = new Date().toISOString();
            
            saveData();
            
            alert('‚úÖ Lifetime access activated! You now have full access forever.');
            closeLifetimeCodeModal();
            
            // Auto-login
            currentUser = users[username];
            showDashboard();
        }

        // ===================================
        // SETTINGS FUNCTIONS
        // ===================================
        function showSettings() {
            const modal = document.getElementById('settingsModal');
            modal.classList.remove('hidden');
            modal.style.display = 'flex';
            
            // Update settings info
            document.getElementById('settingsUsername').textContent = currentUser.username;
            document.getElementById('settingsAccountType').textContent = 
                currentUser.accountType === 'trial' ? 'Free Trial' :
                currentUser.accountType === 'premium' ? 'Premium Member' :
                currentUser.accountType === 'family' ? 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Plan Member' :
                currentUser.accountType === 'lifetime' ? 'üëë Lifetime Member' : 'Unknown';
            document.getElementById('settingsMemberSince').textContent = 
                new Date(currentUser.createdDate).toLocaleDateString();
            
            // Set language selector
            document.getElementById('settingsLanguageSelector').value = currentLanguage;
            
            // Update subscription section
            const subSection = document.getElementById('subscriptionSection');
            if (currentUser.accountType === 'trial') {
                const trialStart = new Date(currentUser.trialStartDate);
                const now = new Date();
                const daysPassed = Math.floor((now - trialStart) / (1000 * 60 * 60 * 24));
                const daysLeft = 7 - daysPassed;
                
                subSection.innerHTML = `
                    <div style="background: #fff3cd; padding: 20px; border-radius: 10px; border: 2px solid #ffc107; margin-bottom: 20px;">
                        <p style="font-weight: bold; margin-bottom: 15px;">Trial Status: ${daysLeft > 0 ? `${daysLeft} days remaining` : 'Expired'}</p>
                        <p style="margin-bottom: 20px;">Choose your plan to unlock all 20 exercises and 900 activities:</p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="background: white; padding: 20px; border-radius: 10px; border: 3px solid #667eea;">
                                <h4 style="color: #667eea; margin-bottom: 10px;">üíé Premium</h4>
                                <p style="font-size: 28px; font-weight: bold; color: #667eea; margin-bottom: 5px;">$4.99</p>
                                <p style="color: #666; margin-bottom: 15px;">per month</p>
                                <ul style="text-align: left; margin-bottom: 15px; font-size: 14px;">
                                    <li>‚úì 1 User Account</li>
                                    <li>‚úì All 20 Exercises</li>
                                    <li>‚úì 900 Activities</li>
                                    <li>‚úì Progress Tracking</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%;" onclick="upgradeAccount('premium')">Select Premium</button>
                            </div>
                            
                            <div style="background: white; padding: 20px; border-radius: 10px; border: 3px solid #FFD700;">
                                <div style="background: linear-gradient(135deg, #FFD700, #FFA500); color: white; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-bottom: 10px; font-size: 12px; font-weight: bold;">‚≠ê BEST VALUE</div>
                                <h4 style="color: #FF8C00; margin-bottom: 10px;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</h4>
                                <p style="font-size: 28px; font-weight: bold; color: #FF8C00; margin-bottom: 5px;">$9.99</p>
                                <p style="color: #666; margin-bottom: 15px;">per month</p>
                                <ul style="text-align: left; margin-bottom: 15px; font-size: 14px;">
                                    <li>‚úì Up to 5 Users</li>
                                    <li>‚úì All 20 Exercises</li>
                                    <li>‚úì 900 Activities</li>
                                    <li>‚úì Individual Tracking</li>
                                    <li>‚úì Family Dashboard</li>
                                </ul>
                                <button class="btn btn-success" style="width: 100%; background: #FF8C00;" onclick="upgradeAccount('family')">Select Family</button>
                            </div>
                        </div>
                    </div>
                `;
            } else if (currentUser.accountType === 'premium') {
                subSection.innerHTML = `
                    <div style="background: #d4edda; padding: 20px; border-radius: 10px; border: 2px solid #4caf50;">
                        <p><strong>üíé Premium Member</strong></p>
                        <p><strong>Status:</strong> Active</p>
                        <p><strong>Billing:</strong> $4.99/month</p>
                        <p style="margin-top: 15px; font-size: 14px; color: #666;">Want to add family members? Upgrade to Family Plan for $9.99/month</p>
                        <button class="btn btn-warning" style="width: 100%; margin-top: 10px; background: #FF8C00;" onclick="upgradeToFamily()">Upgrade to Family Plan</button>
                    </div>
                `;
            } else if (currentUser.accountType === 'family') {
                // Get family members
                const familyMembers = currentUser.familyMembers || [currentUser.username];
                const remainingSlots = 5 - familyMembers.length;
                
                subSection.innerHTML = `
                    <div style="background: #fff4e6; padding: 20px; border-radius: 10px; border: 3px solid #FF8C00;">
                        <p style="font-size: 20px; font-weight: bold; color: #FF8C00; margin-bottom: 10px;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Plan</p>
                        <p><strong>Status:</strong> Active</p>
                        <p><strong>Billing:</strong> $9.99/month</p>
                        <p><strong>Family Members:</strong> ${familyMembers.length} of 5</p>
                        
                        <div style="margin-top: 20px; background: white; padding: 15px; border-radius: 10px;">
                            <h4 style="color: #FF8C00; margin-bottom: 10px;">Family Members:</h4>
                            <ul style="list-style: none; padding: 0;">
                                ${familyMembers.map(member => `
                                    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 5px; display: flex; justify-content: space-between;">
                                        <span>üë§ ${member}</span>
                                        ${member !== currentUser.username ? '<button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="removeFamilyMember(\'' + member + '\')">Remove</button>' : '<span style="color: #4caf50; font-size: 12px;">Account Owner</span>'}
                                    </li>
                                `).join('')}
                            </ul>
                            
                            ${remainingSlots > 0 ? `
                                <div style="margin-top: 15px;">
                                    <p style="color: #666; margin-bottom: 10px;">${remainingSlots} slot${remainingSlots > 1 ? 's' : ''} remaining</p>
                                    <input type="text" id="newFamilyMember" placeholder="Enter username to add" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 2px solid #ddd; border-radius: 5px;" />
                                    <button class="btn btn-success" style="width: 100%;" onclick="addFamilyMember()">Add Family Member</button>
                                </div>
                            ` : '<p style="margin-top: 15px; color: #e91e63; font-weight: bold;">Family plan is full (5/5 members)</p>'}
                        </div>
                    </div>
                `;
            } else if (currentUser.accountType === 'lifetime') {
                subSection.innerHTML = `
                    <div style="background: linear-gradient(135deg, #FFD700, #FFA500); padding: 20px; border-radius: 10px; border: 3px solid #FF8C00; color: white;">
                        <p style="font-size: 24px; font-weight: bold; text-align: center;">üëë LIFETIME MEMBER üëë</p>
                        <p style="text-align: center; margin-top: 10px;">Free Forever - Full Access</p>
                        <p style="text-align: center; font-size: 12px; margin-top: 10px;">Code: ${currentUser.lifetimeCode || 'Direct Access'}</p>
                    </div>
                `;
            }
        }
        
        function closeSettings() {
            const modal = document.getElementById('settingsModal');
            modal.classList.add('hidden');
            modal.style.display = 'none';
        }
        
        function changeLanguageFromSettings() {
            const newLang = document.getElementById('settingsLanguageSelector').value;
            currentLanguage = newLang;
            document.getElementById('topLanguageSelector').value = newLang;
            updateLanguage();
        }
        
        function upgradeAccount(plan) {
            if (!plan) plan = 'premium'; // Default to premium
            
            const planName = plan === 'premium' ? 'Premium' : 'Family';
            const price = plan === 'premium' ? '$4.99/month' : '$9.99/month';
            const priceId = plan === 'premium' ? STRIPE_PRICES.monthly : STRIPE_PRICES.annual;
            
            if (confirm(`Upgrade to ${planName} Plan (${price})?\n\nYou'll be redirected to secure Stripe checkout.`)) {
                // Create Stripe Checkout Session
                // Note: In production, you need a backend to create checkout sessions
                // For now, redirect to Stripe Payment Link (you can create this in your Stripe Dashboard)
                
                const successUrl = window.location.origin + '?success=true&plan=' + plan;
                const cancelUrl = window.location.origin + '?canceled=true';
                
                // Option 1: Use Stripe Payment Links (recommended for quick setup)
                // Go to Stripe Dashboard > Payment Links and create links for each plan
                // Then replace these URLs:
                if (plan === 'premium') {
                    window.location.href = 'https://buy.stripe.com/YOUR_PREMIUM_PAYMENT_LINK';
                } else {
                    window.location.href = 'https://buy.stripe.com/YOUR_FAMILY_PAYMENT_LINK';
                }
                
                // Option 2: Server-side checkout (more advanced)
                // Uncomment this code when you have a backend:
                /*
                fetch('https://your-backend.com/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        priceId: priceId,
                        successUrl: successUrl,
                        cancelUrl: cancelUrl,
                        username: currentUser.username
                    })
                })
                .then(response => response.json())
                .then(session => {
                    return stripe.redirectToCheckout({ sessionId: session.id });
                })
                .then(result => {
                    if (result.error) {
                        alert(result.error.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred. Please try again.');
                });
                */
            }
        }
        
        // Check URL parameters for successful payment
        window.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('success') === 'true') {
                const plan = urlParams.get('plan');
                alert('üéâ Payment successful! Welcome to ' + (plan === 'premium' ? 'Premium' : 'Family Plan') + '!');
                
                // Update user account type
                if (currentUser) {
                    currentUser.accountType = plan;
                    if (plan === 'family') {
                        currentUser.familyMembers = [currentUser.username];
                    }
                    saveData();
                    
                    // Track purchase for thank you email
                    trackPurchase(plan);
                    
                    showDashboard();
                }
                
                // Clean URL
                window.history.replaceState({}, document.title, window.location.pathname);
            } else if (urlParams.get('canceled') === 'true') {
                alert('Payment was canceled. You can try again anytime!');
                
                // Track abandoned cart
                if (currentUser && currentUser.email && currentUser.emailOptIn) {
                    trackEmailEvent('checkout_abandoned', {
                        username: currentUser.username,
                        email: currentUser.email,
                        message: 'User started checkout but cancelled'
                    });
                }
                
                // Clean URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });
        
        function upgradeToFamily() {
            if (confirm('Upgrade from Premium to Family Plan?\n\nYour billing will change to $9.99/month and you can add up to 4 more family members.')) {
                currentUser.accountType = 'family';
                currentUser.familyMembers = [currentUser.username];
                saveData();
                alert('‚úÖ Upgraded to Family Plan! You can now add family members.');
                showSettings(); // Refresh settings
            }
        }
        
        function addFamilyMember() {
            const newMember = document.getElementById('newFamilyMember').value.trim();
            
            if (!newMember) {
                alert('Please enter a username');
                return;
            }
            
            if (!currentUser.familyMembers) {
                currentUser.familyMembers = [currentUser.username];
            }
            
            if (currentUser.familyMembers.length >= 5) {
                alert('Family plan is full (5/5 members). Remove a member to add a new one.');
                return;
            }
            
            if (currentUser.familyMembers.includes(newMember)) {
                alert('This user is already in your family plan');
                return;
            }
            
            // Add the family member
            currentUser.familyMembers.push(newMember);
            
            // Create or update the family member's account
            if (!users[newMember]) {
                users[newMember] = {
                    username: newMember,
                    password: '',
                    createdDate: new Date().toISOString(),
                    accountType: 'family',
                    familyOwner: currentUser.username,
                    points: 0,
                    streak: 0,
                    completed: 0,
                    progress: {}
                };
            } else {
                users[newMember].accountType = 'family';
                users[newMember].familyOwner = currentUser.username;
            }
            
            saveData();
            alert(`‚úÖ ${newMember} has been added to your family plan!\n\nThey can now log in with full access.`);
            document.getElementById('newFamilyMember').value = '';
            showSettings(); // Refresh settings
        }
        
        function removeFamilyMember(username) {
            if (confirm(`Remove ${username} from your family plan?\n\nThey will lose access unless they subscribe separately.`)) {
                // Remove from family members list
                currentUser.familyMembers = currentUser.familyMembers.filter(m => m !== username);
                
                // Update the removed member's account
                if (users[username]) {
                    users[username].accountType = 'trial';
                    users[username].trialStartDate = new Date().toISOString();
                    users[username].trialDays = 7;
                    delete users[username].familyOwner;
                }
                
                saveData();
                alert(`‚úÖ ${username} has been removed from your family plan.`);
                showSettings(); // Refresh settings
            }
        }

        // ===================================
        // ADMIN FUNCTIONS
        // ===================================
        // ADMIN FUNCTIONS
        // ===================================
        
        // Secret admin access (click copyright 5 times)
        let adminClickCount = 0;
        let adminClickTimer = null;
        
        function adminSecretClick() {
            adminClickCount++;
            
            // Reset counter after 3 seconds of no clicks
            if (adminClickTimer) clearTimeout(adminClickTimer);
            adminClickTimer = setTimeout(() => {
                adminClickCount = 0;
            }, 3000);
            
            // After 5 clicks, show admin login
            if (adminClickCount >= 5) {
                adminClickCount = 0;
                showAdminLogin();
            }
        }
        
        function showAdminLogin() {
            const password = prompt('Enter Admin Password:');
            if (password === 'VV-ADMIN-2024') {
                const modal = document.getElementById('adminModal');
                modal.classList.remove('hidden');
                modal.style.display = 'flex';
                loadAdminData();
            } else if (password) {
                alert('Incorrect password');
            }
        }
        
        function closeAdmin() {
            const modal = document.getElementById('adminModal');
            modal.classList.add('hidden');
            modal.style.display = 'none';
        }
        
        function showAdminTab(tab) {
            // Hide all tabs
            document.getElementById('adminCodesTab').classList.add('hidden');
            document.getElementById('adminUsersTab').classList.add('hidden');
            document.getElementById('adminDirectTab').classList.add('hidden');
            document.getElementById('adminEmailsTab').classList.add('hidden');
            
            // Remove active class from all buttons
            document.querySelectorAll('.admin-tab').forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            if (tab === 'codes') {
                document.getElementById('adminCodesTab').classList.remove('hidden');
                document.querySelectorAll('.admin-tab')[0].classList.add('active');
                loadCodesTable();
            } else if (tab === 'users') {
                document.getElementById('adminUsersTab').classList.remove('hidden');
                document.querySelectorAll('.admin-tab')[1].classList.add('active');
                loadUserStats();
            } else if (tab === 'direct') {
                document.getElementById('adminDirectTab').classList.remove('hidden');
                document.querySelectorAll('.admin-tab')[2].classList.add('active');
            } else if (tab === 'emails') {
                document.getElementById('adminEmailsTab').classList.remove('hidden');
                document.querySelectorAll('.admin-tab')[3].classList.add('active');
            }
        }
        
        function viewEmailEvents() {
            const events = getEmailEvents();
            if (events.length === 0) {
                alert('No email events tracked yet.\n\nEvents will appear here as users:\n‚Ä¢ Register\n‚Ä¢ Approach trial end\n‚Ä¢ Abandon checkout\n‚Ä¢ Complete purchase');
                return;
            }
            
            let message = `üìß EMAIL EVENTS LOG (${events.length} total)\n\n`;
            message += 'Recent events:\n\n';
            
            events.slice(-10).reverse().forEach((event, i) => {
                const date = new Date(event.timestamp).toLocaleString();
                message += `${i + 1}. ${event.type}\n`;
                message += `   User: ${event.data.username}\n`;
                message += `   Email: ${event.data.email}\n`;
                message += `   Date: ${date}\n\n`;
            });
            
            message += '\nüí° Export email list to send these communications!';
            alert(message);
        }
        
        function loadAdminData() {
            loadCodesTable();
            loadUserStats();
        }
        
        function loadCodesTable() {
            const tbody = document.getElementById('codesTableBody');
            tbody.innerHTML = '';
            
            lifetimeCodes.forEach(code => {
                const row = document.createElement('tr');
                row.className = code.used ? 'code-used' : 'code-available';
                row.innerHTML = `
                    <td>${code.code}</td>
                    <td>${code.used ? 'üî¥ Used' : 'üü¢ Available'}</td>
                    <td>${code.usedBy || '-'}</td>
                    <td>${code.usedDate ? new Date(code.usedDate).toLocaleDateString() : '-'}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function loadUserStats() {
            const userArray = Object.values(users);
            document.getElementById('adminTotalUsers').textContent = userArray.length;
            document.getElementById('adminTrialUsers').textContent = 
                userArray.filter(u => u.accountType === 'trial').length;
            document.getElementById('adminPremiumUsers').textContent = 
                userArray.filter(u => u.accountType === 'premium').length;
            document.getElementById('adminFamilyUsers').textContent = 
                userArray.filter(u => u.accountType === 'family').length;
            document.getElementById('adminLifetimeUsers').textContent = 
                userArray.filter(u => u.accountType === 'lifetime').length;
        }
        
        function exportCodesToCSV() {
            let csv = 'Code,Status,Used By,Date Used\n';
            lifetimeCodes.forEach(code => {
                csv += `${code.code},${code.used ? 'Used' : 'Available'},${code.usedBy || ''},${code.usedDate || ''}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'versevault-lifetime-codes.csv';
            a.click();
            window.URL.revokeObjectURL(url);
            
            alert('‚úÖ Codes exported to CSV!');
        }
        
        function grantDirectAccess() {
            const username = document.getElementById('directAccessUsername').value.trim();
            
            if (!username) {
                alert('Please enter a username');
                return;
            }
            
            // Create or update user
            if (!users[username]) {
                users[username] = {
                    username: username,
                    password: '',
                    createdDate: new Date().toISOString(),
                    accountType: 'lifetime',
                    lifetimeCode: 'DIRECT-ACCESS',
                    directAccessGranted: new Date().toISOString(),
                    points: 0,
                    streak: 0,
                    completed: 0,
                    progress: {}
                };
            } else {
                users[username].accountType = 'lifetime';
                users[username].lifetimeCode = 'DIRECT-ACCESS';
                users[username].directAccessGranted = new Date().toISOString();
            }
            
            saveData();
            
            alert(`‚úÖ Lifetime access granted to ${username}!\n\nThey can now log in with full access.`);
            document.getElementById('directAccessUsername').value = '';
            loadUserStats();
        }

        function signOut() {
            currentUser = null;
            document.getElementById('dashboardScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function showHelp() {
            alert('üìö Help & FAQ\n\n‚úì Use Scripture memory exercises daily\n‚úì Progress through beginner to expert levels\n‚úì Track your streak and points\n‚úì Access all 20 exercise types with premium\n\nFor support: contact Building On The Faith Ministry');
        }
        
        function showPrivacyPolicy() {
            alert(`üîí PRIVACY POLICY - VerseVault

DATA COLLECTION:
We collect your email address and username for:
‚Ä¢ Account management and authentication
‚Ä¢ Ministry updates and encouragement (opt-in)
‚Ä¢ New feature announcements
‚Ä¢ Customer support

EMAIL COMMUNICATIONS:
‚úì You control your email preferences
‚úì Opt-in is voluntary for marketing emails
‚úì You can unsubscribe anytime
‚úì We NEVER sell or share your email with third parties

DATA STORAGE:
‚Ä¢ Your progress is stored locally on your device
‚Ä¢ Email addresses are stored securely
‚Ä¢ We use industry-standard encryption
‚Ä¢ You can request data deletion anytime

YOUR RIGHTS:
‚Ä¢ Access your data anytime
‚Ä¢ Request data deletion
‚Ä¢ Opt-out of marketing emails
‚Ä¢ Update your preferences in Settings

CONTACT:
Building On The Faith Ministry
Elder Robert Chalk Jr.

Last Updated: October 2024`);
        }
        
        function showTermsOfUse() {
            alert(`üìú TERMS OF USE - VerseVault

By using VerseVault, you agree to:

PURPOSE:
VerseVault is a faith-based cognitive wellness application designed for Scripture memory and spiritual growth.

USER RESPONSIBILITIES:
‚Ä¢ Provide accurate registration information
‚Ä¢ Maintain account security
‚Ä¢ Use the app appropriately
‚Ä¢ Respect copyright and Scripture

SUBSCRIPTION TERMS:
‚Ä¢ Free 7-day trial (limited access)
‚Ä¢ Premium: $4.99/month (cancel anytime)
‚Ä¢ Family Plan: $9.99/month for up to 5 users
‚Ä¢ Lifetime codes available for special cases

DISCLAIMERS:
‚Ä¢ Not a medical device
‚Ä¢ Not a substitute for professional medical care
‚Ä¢ Consult healthcare providers for medical advice
‚Ä¢ Results may vary by individual

INTELLECTUAL PROPERTY:
¬© 2024-2026 Building On The Faith Ministry
All rights reserved.

CANCELLATION:
You may cancel your subscription anytime through your account settings or by contacting us.

CONTACT:
Building On The Faith Ministry
Elder Robert Chalk Jr.

Last Updated: October 2024`);
        }

        // Initialize
        updateLanguage();
    </script>
</body>
</html>