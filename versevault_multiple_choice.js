// VerseVault - 45 KJV Scripture Multiple Choice Questions
// Created for Elder Robert Chalk Jr. - Building On The Faith Ministry
// Date: January 2026

const multipleChoiceQuestions = [
  // SALVATION & REDEMPTION (10 Questions)
  {
    id: 1,
    category: "Salvation & Redemption",
    question: "For God so loved the world, that he gave his only begotten ___",
    choices: [
      "A) Prophet",
      "B) Son",
      "C) Angel",
      "D) Servant"
    ],
    correctAnswer: 1, // Index 1 = B
    scripture: "John 3:16",
    fullVerse: "For God so loved the world, that he gave his only begotten Son, that whosoever believeth in him should not perish, but have everlasting life."
  },
  {
    id: 2,
    category: "Salvation & Redemption",
    question: "For all have sinned, and come short of the ___ of God",
    choices: [
      "A) Glory",
      "B) Kingdom",
      "C) Mercy",
      "D) Blessing"
    ],
    correctAnswer: 0,
    scripture: "Romans 3:23",
    fullVerse: "For all have sinned, and come short of the glory of God."
  },
  {
    id: 3,
    category: "Salvation & Redemption",
    question: "For the wages of sin is death; but the gift of God is ___ life through Jesus Christ our Lord",
    choices: [
      "A) Abundant",
      "B) Eternal",
      "C) Peaceful",
      "D) Righteous"
    ],
    correctAnswer: 1,
    scripture: "Romans 6:23",
    fullVerse: "For the wages of sin is death; but the gift of God is eternal life through Jesus Christ our Lord."
  },
  {
    id: 4,
    category: "Salvation & Redemption",
    question: "If we confess our sins, he is faithful and just to ___ us our sins",
    choices: [
      "A) Remember",
      "B) Forgive",
      "C) Record",
      "D) Judge"
    ],
    correctAnswer: 1,
    scripture: "1 John 1:9",
    fullVerse: "If we confess our sins, he is faithful and just to forgive us our sins, and to cleanse us from all unrighteousness."
  },
  {
    id: 5,
    category: "Salvation & Redemption",
    question: "Neither is there salvation in any other: for there is none other ___ under heaven given among men",
    choices: [
      "A) Name",
      "B) Power",
      "C) Way",
      "D) Prophet"
    ],
    correctAnswer: 0,
    scripture: "Acts 4:12",
    fullVerse: "Neither is there salvation in any other: for there is none other name under heaven given among men, whereby we must be saved."
  },
  {
    id: 6,
    category: "Salvation & Redemption",
    question: "That if thou shalt confess with thy mouth the Lord Jesus, and shalt believe in thine heart that God hath raised him from the dead, thou shalt be ___",
    choices: [
      "A) Blessed",
      "B) Saved",
      "C) Healed",
      "D) Prospered"
    ],
    correctAnswer: 1,
    scripture: "Romans 10:9",
    fullVerse: "That if thou shalt confess with thy mouth the Lord Jesus, and shalt believe in thine heart that God hath raised him from the dead, thou shalt be saved."
  },
  {
    id: 7,
    category: "Salvation & Redemption",
    question: "For by grace are ye saved through ___; and that not of yourselves",
    choices: [
      "A) Works",
      "B) Faith",
      "C) Prayer",
      "D) Obedience"
    ],
    correctAnswer: 1,
    scripture: "Ephesians 2:8",
    fullVerse: "For by grace are ye saved through faith; and that not of yourselves: it is the gift of God."
  },
  {
    id: 8,
    category: "Salvation & Redemption",
    question: "But as many as received him, to them gave he power to become the ___ of God",
    choices: [
      "A) Servants",
      "B) Friends",
      "C) Sons",
      "D) Disciples"
    ],
    correctAnswer: 2,
    scripture: "John 1:12",
    fullVerse: "But as many as received him, to them gave he power to become the sons of God, even to them that believe on his name."
  },
  {
    id: 9,
    category: "Salvation & Redemption",
    question: "Whosoever shall call upon the name of the Lord shall be ___",
    choices: [
      "A) Heard",
      "B) Saved",
      "C) Blessed",
      "D) Answered"
    ],
    correctAnswer: 1,
    scripture: "Romans 10:13",
    fullVerse: "For whosoever shall call upon the name of the Lord shall be saved."
  },
  {
    id: 10,
    category: "Salvation & Redemption",
    question: "Jesus saith unto him, I am the way, the truth, and the ___",
    choices: [
      "A) Light",
      "B) Life",
      "C) Love",
      "D) Lord"
    ],
    correctAnswer: 1,
    scripture: "John 14:6",
    fullVerse: "Jesus saith unto him, I am the way, the truth, and the life: no man cometh unto the Father, but by me."
  },

  // FAITH & TRUST (8 Questions)
  {
    id: 11,
    category: "Faith & Trust",
    question: "Now faith is the substance of things hoped for, the evidence of things not ___",
    choices: [
      "A) Understood",
      "B) Seen",
      "C) Known",
      "D) Revealed"
    ],
    correctAnswer: 1,
    scripture: "Hebrews 11:1",
    fullVerse: "Now faith is the substance of things hoped for, the evidence of things not seen."
  },
  {
    id: 12,
    category: "Faith & Trust",
    question: "Trust in the Lord with all thine heart; and lean not unto thine own ___",
    choices: [
      "A) Strength",
      "B) Wisdom",
      "C) Understanding",
      "D) Knowledge"
    ],
    correctAnswer: 2,
    scripture: "Proverbs 3:5",
    fullVerse: "Trust in the Lord with all thine heart; and lean not unto thine own understanding."
  },
  {
    id: 13,
    category: "Faith & Trust",
    question: "But without faith it is impossible to ___ him",
    choices: [
      "A) Please",
      "B) Know",
      "C) Serve",
      "D) Worship"
    ],
    correctAnswer: 0,
    scripture: "Hebrews 11:6",
    fullVerse: "But without faith it is impossible to please him: for he that cometh to God must believe that he is, and that he is a rewarder of them that diligently seek him."
  },
  {
    id: 14,
    category: "Faith & Trust",
    question: "So then faith cometh by hearing, and hearing by the word of ___",
    choices: [
      "A) Prophets",
      "B) God",
      "C) Prayer",
      "D) Wisdom"
    ],
    correctAnswer: 1,
    scripture: "Romans 10:17",
    fullVerse: "So then faith cometh by hearing, and hearing by the word of God."
  },
  {
    id: 15,
    category: "Faith & Trust",
    question: "For we walk by ___, not by sight",
    choices: [
      "A) Faith",
      "B) Hope",
      "C) Love",
      "D) Truth"
    ],
    correctAnswer: 0,
    scripture: "2 Corinthians 5:7",
    fullVerse: "For we walk by faith, not by sight."
  },
  {
    id: 16,
    category: "Faith & Trust",
    question: "If ye have faith as a grain of ___ seed, ye shall say unto this mountain, Remove hence",
    choices: [
      "A) Wheat",
      "B) Barley",
      "C) Mustard",
      "D) Corn"
    ],
    correctAnswer: 2,
    scripture: "Matthew 17:20",
    fullVerse: "If ye have faith as a grain of mustard seed, ye shall say unto this mountain, Remove hence to yonder place; and it shall remove."
  },
  {
    id: 17,
    category: "Faith & Trust",
    question: "The just shall live by ___",
    choices: [
      "A) Works",
      "B) Faith",
      "C) Law",
      "D) Prayer"
    ],
    correctAnswer: 1,
    scripture: "Romans 1:17",
    fullVerse: "For therein is the righteousness of God revealed from faith to faith: as it is written, The just shall live by faith."
  },
  {
    id: 18,
    category: "Faith & Trust",
    question: "Jesus said unto him, If thou canst believe, all things are ___ to him that believeth",
    choices: [
      "A) Possible",
      "B) Given",
      "C) Revealed",
      "D) Known"
    ],
    correctAnswer: 0,
    scripture: "Mark 9:23",
    fullVerse: "Jesus said unto him, If thou canst believe, all things are possible to him that believeth."
  },

  // LOVE & COMPASSION (7 Questions)
  {
    id: 19,
    category: "Love & Compassion",
    question: "God is ___; and he that dwelleth in love dwelleth in God",
    choices: [
      "A) Light",
      "B) Love",
      "C) Truth",
      "D) Peace"
    ],
    correctAnswer: 1,
    scripture: "1 John 4:16",
    fullVerse: "God is love; and he that dwelleth in love dwelleth in God, and God in him."
  },
  {
    id: 20,
    category: "Love & Compassion",
    question: "A new commandment I give unto you, That ye ___ one another",
    choices: [
      "A) Serve",
      "B) Love",
      "C) Help",
      "D) Teach"
    ],
    correctAnswer: 1,
    scripture: "John 13:34",
    fullVerse: "A new commandment I give unto you, That ye love one another; as I have loved you, that ye also love one another."
  },
  {
    id: 21,
    category: "Love & Compassion",
    question: "And now abideth faith, hope, charity, these three; but the greatest of these is ___",
    choices: [
      "A) Faith",
      "B) Hope",
      "C) Charity",
      "D) Peace"
    ],
    correctAnswer: 2,
    scripture: "1 Corinthians 13:13",
    fullVerse: "And now abideth faith, hope, charity, these three; but the greatest of these is charity."
  },
  {
    id: 22,
    category: "Love & Compassion",
    question: "Beloved, let us love one another: for love is of ___",
    choices: [
      "A) Heaven",
      "B) God",
      "C) Faith",
      "D) Christ"
    ],
    correctAnswer: 1,
    scripture: "1 John 4:7",
    fullVerse: "Beloved, let us love one another: for love is of God; and every one that loveth is born of God, and knoweth God."
  },
  {
    id: 23,
    category: "Love & Compassion",
    question: "Thou shalt love thy neighbour as ___",
    choices: [
      "A) Thyself",
      "B) God",
      "C) Christ",
      "D) Heaven"
    ],
    correctAnswer: 0,
    scripture: "Matthew 22:39",
    fullVerse: "And the second is like unto it, Thou shalt love thy neighbour as thyself."
  },
  {
    id: 24,
    category: "Love & Compassion",
    question: "Charity suffereth long, and is ___; charity envieth not",
    choices: [
      "A) Patient",
      "B) Kind",
      "C) Gentle",
      "D) Merciful"
    ],
    correctAnswer: 1,
    scripture: "1 Corinthians 13:4",
    fullVerse: "Charity suffereth long, and is kind; charity envieth not; charity vaunteth not itself, is not puffed up."
  },
  {
    id: 25,
    category: "Love & Compassion",
    question: "For God so loved the ___, that he gave his only begotten Son",
    choices: [
      "A) Church",
      "B) World",
      "C) People",
      "D) Saints"
    ],
    correctAnswer: 1,
    scripture: "John 3:16",
    fullVerse: "For God so loved the world, that he gave his only begotten Son, that whosoever believeth in him should not perish, but have everlasting life."
  },

  // WISDOM & KNOWLEDGE (7 Questions)
  {
    id: 26,
    category: "Wisdom & Knowledge",
    question: "The fear of the Lord is the beginning of ___",
    choices: [
      "A) Faith",
      "B) Wisdom",
      "C) Knowledge",
      "D) Understanding"
    ],
    correctAnswer: 1,
    scripture: "Proverbs 9:10",
    fullVerse: "The fear of the Lord is the beginning of wisdom: and the knowledge of the holy is understanding."
  },
  {
    id: 27,
    category: "Wisdom & Knowledge",
    question: "If any of you lack wisdom, let him ask of ___",
    choices: [
      "A) God",
      "B) Elders",
      "C) Teachers",
      "D) Scripture"
    ],
    correctAnswer: 0,
    scripture: "James 1:5",
    fullVerse: "If any of you lack wisdom, let him ask of God, that giveth to all men liberally, and upbraideth not; and it shall be given him."
  },
  {
    id: 28,
    category: "Wisdom & Knowledge",
    question: "Trust in the Lord with all thine heart; and lean not unto thine own ___",
    choices: [
      "A) Wisdom",
      "B) Strength",
      "C) Understanding",
      "D) Knowledge"
    ],
    correctAnswer: 2,
    scripture: "Proverbs 3:5",
    fullVerse: "Trust in the Lord with all thine heart; and lean not unto thine own understanding."
  },
  {
    id: 29,
    category: "Wisdom & Knowledge",
    question: "The entrance of thy words giveth ___; it giveth understanding unto the simple",
    choices: [
      "A) Peace",
      "B) Light",
      "C) Hope",
      "D) Truth"
    ],
    correctAnswer: 1,
    scripture: "Psalm 119:130",
    fullVerse: "The entrance of thy words giveth light; it giveth understanding unto the simple."
  },
  {
    id: 30,
    category: "Wisdom & Knowledge",
    question: "Thy word is a lamp unto my feet, and a ___ unto my path",
    choices: [
      "A) Guide",
      "B) Light",
      "C) Truth",
      "D) Way"
    ],
    correctAnswer: 1,
    scripture: "Psalm 119:105",
    fullVerse: "Thy word is a lamp unto my feet, and a light unto my path."
  },
  {
    id: 31,
    category: "Wisdom & Knowledge",
    question: "For the Lord giveth wisdom: out of his mouth cometh knowledge and ___",
    choices: [
      "A) Truth",
      "B) Understanding",
      "C) Peace",
      "D) Power"
    ],
    correctAnswer: 1,
    scripture: "Proverbs 2:6",
    fullVerse: "For the Lord giveth wisdom: out of his mouth cometh knowledge and understanding."
  },
  {
    id: 32,
    category: "Wisdom & Knowledge",
    question: "Get wisdom, get understanding: forget it not; neither ___ from the words of my mouth",
    choices: [
      "A) Turn",
      "B) Decline",
      "C) Depart",
      "D) Leave"
    ],
    correctAnswer: 1,
    scripture: "Proverbs 4:5",
    fullVerse: "Get wisdom, get understanding: forget it not; neither decline from the words of my mouth."
  },

  // PRAYER & WORSHIP (6 Questions)
  {
    id: 33,
    category: "Prayer & Worship",
    question: "Pray without ___",
    choices: [
      "A) Stopping",
      "B) Ceasing",
      "C) Ending",
      "D) Doubting"
    ],
    correctAnswer: 1,
    scripture: "1 Thessalonians 5:17",
    fullVerse: "Pray without ceasing."
  },
  {
    id: 34,
    category: "Prayer & Worship",
    question: "Ask, and it shall be given you; seek, and ye shall ___",
    choices: [
      "A) Know",
      "B) Find",
      "C) Receive",
      "D) Understand"
    ],
    correctAnswer: 1,
    scripture: "Matthew 7:7",
    fullVerse: "Ask, and it shall be given you; seek, and ye shall find; knock, and it shall be opened unto you."
  },
  {
    id: 35,
    category: "Prayer & Worship",
    question: "The effectual fervent prayer of a righteous man availeth ___",
    choices: [
      "A) Much",
      "B) Always",
      "C) Greatly",
      "D) Forever"
    ],
    correctAnswer: 0,
    scripture: "James 5:16",
    fullVerse: "The effectual fervent prayer of a righteous man availeth much."
  },
  {
    id: 36,
    category: "Prayer & Worship",
    question: "Call unto me, and I will answer thee, and shew thee great and ___ things",
    choices: [
      "A) Wonderful",
      "B) Mighty",
      "C) Glorious",
      "D) Marvelous"
    ],
    correctAnswer: 1,
    scripture: "Jeremiah 33:3",
    fullVerse: "Call unto me, and I will answer thee, and shew thee great and mighty things, which thou knowest not."
  },
  {
    id: 37,
    category: "Prayer & Worship",
    question: "Be careful for nothing; but in every thing by prayer and supplication with ___ let your requests be made known unto God",
    choices: [
      "A) Faith",
      "B) Thanksgiving",
      "C) Praise",
      "D) Worship"
    ],
    correctAnswer: 1,
    scripture: "Philippians 4:6",
    fullVerse: "Be careful for nothing; but in every thing by prayer and supplication with thanksgiving let your requests be made known unto God."
  },
  {
    id: 38,
    category: "Prayer & Worship",
    question: "When thou prayest, enter into thy ___, and when thou hast shut thy door, pray to thy Father",
    choices: [
      "A) Heart",
      "B) Closet",
      "C) Room",
      "D) Temple"
    ],
    correctAnswer: 1,
    scripture: "Matthew 6:6",
    fullVerse: "But thou, when thou prayest, enter into thy closet, and when thou hast shut thy door, pray to thy Father which is in secret."
  },

  // STRENGTH & COURAGE (7 Questions)
  {
    id: 39,
    category: "Strength & Courage",
    question: "I can do all things through Christ which ___ me",
    choices: [
      "A) Guides",
      "B) Strengtheneth",
      "C) Helps",
      "D) Saves"
    ],
    correctAnswer: 1,
    scripture: "Philippians 4:13",
    fullVerse: "I can do all things through Christ which strengtheneth me."
  },
  {
    id: 40,
    category: "Strength & Courage",
    question: "Be strong and of a good courage; be not afraid, neither be thou ___",
    choices: [
      "A) Worried",
      "B) Dismayed",
      "C) Troubled",
      "D) Fearful"
    ],
    correctAnswer: 1,
    scripture: "Joshua 1:9",
    fullVerse: "Be strong and of a good courage; be not afraid, neither be thou dismayed: for the Lord thy God is with thee whithersoever thou goest."
  },
  {
    id: 41,
    category: "Strength & Courage",
    question: "The Lord is my ___ and my salvation; whom shall I fear?",
    choices: [
      "A) Shepherd",
      "B) Light",
      "C) Strength",
      "D) Rock"
    ],
    correctAnswer: 1,
    scripture: "Psalm 27:1",
    fullVerse: "The Lord is my light and my salvation; whom shall I fear? the Lord is the strength of my life; of whom shall I be afraid?"
  },
  {
    id: 42,
    category: "Strength & Courage",
    question: "But they that wait upon the Lord shall renew their ___",
    choices: [
      "A) Faith",
      "B) Strength",
      "C) Hope",
      "D) Spirit"
    ],
    correctAnswer: 1,
    scripture: "Isaiah 40:31",
    fullVerse: "But they that wait upon the Lord shall renew their strength; they shall mount up with wings as eagles."
  },
  {
    id: 43,
    category: "Strength & Courage",
    question: "For God hath not given us the spirit of fear; but of power, and of love, and of a sound ___",
    choices: [
      "A) Heart",
      "B) Mind",
      "C) Spirit",
      "D) Soul"
    ],
    correctAnswer: 1,
    scripture: "2 Timothy 1:7",
    fullVerse: "For God hath not given us the spirit of fear; but of power, and of love, and of a sound mind."
  },
  {
    id: 44,
    category: "Strength & Courage",
    question: "The Lord is my rock, and my fortress, and my ___",
    choices: [
      "A) Saviour",
      "B) Deliverer",
      "C) Protector",
      "D) Shield"
    ],
    correctAnswer: 1,
    scripture: "Psalm 18:2",
    fullVerse: "The Lord is my rock, and my fortress, and my deliverer; my God, my strength, in whom I will trust."
  },
  {
    id: 45,
    category: "Strength & Courage",
    question: "What time I am afraid, I will trust in ___",
    choices: [
      "A) God",
      "B) Thee",
      "C) Prayer",
      "D) Faith"
    ],
    correctAnswer: 1,
    scripture: "Psalm 56:3",
    fullVerse: "What time I am afraid, I will trust in thee."
  }
];

// ========================================
// MULTIPLE CHOICE QUIZ FUNCTIONALITY
// ========================================

class MultipleChoiceQuiz {
  constructor(questions) {
    this.questions = questions;
    this.currentQuestionIndex = 0;
    this.score = 0;
    this.answeredQuestions = [];
    this.userAnswers = [];
  }

  // Initialize the quiz
  init(containerId) {
    this.container = document.getElementById(containerId);
    if (!this.container) {
      console.error('Quiz container not found');
      return;
    }
    this.displayQuestion();
  }

  // Display current question
  displayQuestion() {
    const question = this.questions[this.currentQuestionIndex];
    
    const quizHTML = `
      <div class="multiple-choice-quiz" style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        max-width: 700px;
        margin: 20px auto;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      ">
        <!-- Progress Bar -->
        <div style="margin-bottom: 20px;">
          <div style="
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
          ">
            <div style="
              background: #4CAF50;
              height: 100%;
              width: ${((this.currentQuestionIndex + 1) / this.questions.length) * 100}%;
              transition: width 0.3s ease;
            "></div>
          </div>
          <div style="
            color: white;
            font-size: 14px;
            margin-top: 8px;
            text-align: center;
          ">
            Question ${this.currentQuestionIndex + 1} of ${this.questions.length}
          </div>
        </div>

        <!-- Category Badge -->
        <div style="
          background: rgba(255,255,255,0.2);
          display: inline-block;
          padding: 8px 16px;
          border-radius: 20px;
          color: white;
          font-size: 12px;
          font-weight: bold;
          margin-bottom: 15px;
          text-transform: uppercase;
        ">
          ${question.category}
        </div>

        <!-- Question -->
        <div style="
          background: white;
          padding: 25px;
          border-radius: 15px;
          margin-bottom: 20px;
          box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        ">
          <h2 style="
            color: #333;
            font-size: 24px;
            margin: 0 0 15px 0;
            line-height: 1.4;
          ">
            ${question.question}
          </h2>
          <div style="
            color: #666;
            font-size: 14px;
            font-style: italic;
          ">
            ðŸ“– ${question.scripture}
          </div>
        </div>

        <!-- Answer Choices -->
        <div id="answer-choices" style="margin-bottom: 20px;">
          ${question.choices.map((choice, index) => `
            <button 
              class="choice-btn" 
              data-index="${index}"
              style="
                background: white;
                border: 3px solid transparent;
                padding: 18px 25px;
                border-radius: 12px;
                width: 100%;
                margin-bottom: 12px;
                font-size: 18px;
                font-weight: 600;
                color: #333;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: left;
                box-shadow: 0 3px 10px rgba(0,0,0,0.1);
              "
              onmouseover="this.style.transform='translateX(5px)'; this.style.borderColor='#667eea';"
              onmouseout="this.style.transform='translateX(0)'; this.style.borderColor='transparent';"
            >
              ${choice}
            </button>
          `).join('')}
        </div>

        <!-- Feedback Area (Hidden Initially) -->
        <div id="feedback-area" style="display: none; margin-top: 20px;"></div>

        <!-- Score Display -->
        <div style="
          background: rgba(255,255,255,0.2);
          padding: 15px;
          border-radius: 10px;
          color: white;
          text-align: center;
          font-size: 18px;
          font-weight: bold;
        ">
          Current Score: <span id="current-score">${this.score}</span> / ${this.currentQuestionIndex}
        </div>
      </div>
    `;

    this.container.innerHTML = quizHTML;
    this.attachEventListeners();
  }

  // Attach event listeners to answer buttons
  attachEventListeners() {
    const choiceButtons = document.querySelectorAll('.choice-btn');
    choiceButtons.forEach(btn => {
      btn.addEventListener('click', (e) => this.handleAnswer(e));
    });
  }

  // Handle answer selection
  handleAnswer(event) {
    const selectedIndex = parseInt(event.target.dataset.index);
    const question = this.questions[this.currentQuestionIndex];
    const isCorrect = selectedIndex === question.correctAnswer;

    // Update score
    if (isCorrect) {
      this.score++;
    }

    // Record answer
    this.userAnswers.push({
      questionId: question.id,
      selectedIndex: selectedIndex,
      correct: isCorrect
    });

    // Disable all buttons
    const allButtons = document.querySelectorAll('.choice-btn');
    allButtons.forEach(btn => {
      btn.disabled = true;
      btn.style.cursor = 'not-allowed';
      btn.style.opacity = '0.6';
    });

    // Highlight correct and incorrect answers
    allButtons[question.correctAnswer].style.background = '#4CAF50';
    allButtons[question.correctAnswer].style.color = 'white';
    allButtons[question.correctAnswer].style.borderColor = '#4CAF50';

    if (!isCorrect) {
      allButtons[selectedIndex].style.background = '#f44336';
      allButtons[selectedIndex].style.color = 'white';
      allButtons[selectedIndex].style.borderColor = '#f44336';
    }

    // Show feedback
    this.showFeedback(isCorrect, question);
  }

  // Show feedback after answer
  showFeedback(isCorrect, question) {
    const feedbackArea = document.getElementById('feedback-area');
    
    const feedbackHTML = `
      <div style="
        background: ${isCorrect ? '#4CAF50' : '#f44336'};
        color: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        animation: slideIn 0.3s ease;
      ">
        <div style="font-size: 24px; font-weight: bold; margin-bottom: 10px;">
          ${isCorrect ? 'âœ“ Correct!' : 'âœ— Incorrect'}
        </div>
        ${!isCorrect ? `
          <div style="font-size: 16px; margin-bottom: 10px;">
            The correct answer is: <strong>${question.choices[question.correctAnswer]}</strong>
          </div>
        ` : ''}
        <div style="
          background: rgba(255,255,255,0.2);
          padding: 15px;
          border-radius: 8px;
          margin-top: 15px;
          font-size: 14px;
          line-height: 1.6;
        ">
          <strong>Full Verse:</strong><br>
          "${question.fullVerse}"<br>
          <em>- ${question.scripture} (KJV)</em>
        </div>
      </div>

      <button id="next-question-btn" style="
        background: white;
        color: #667eea;
        border: none;
        padding: 15px 40px;
        border-radius: 25px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        width: 100%;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
      " onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">
        ${this.currentQuestionIndex < this.questions.length - 1 ? 'Next Question â†’' : 'View Final Results'}
      </button>
    `;

    feedbackArea.innerHTML = feedbackHTML;
    feedbackArea.style.display = 'block';

    // Update score display
    document.getElementById('current-score').textContent = this.score;

    // Add event listener for next question
    document.getElementById('next-question-btn').addEventListener('click', () => {
      if (this.currentQuestionIndex < this.questions.length - 1) {
        this.currentQuestionIndex++;
        this.displayQuestion();
      } else {
        this.showFinalResults();
      }
    });
  }

  // Show final results
  showFinalResults() {
    const percentage = Math.round((this.score / this.questions.length) * 100);
    let grade, message, emoji;

    if (percentage >= 90) {
      grade = 'A+';
      message = 'Outstanding! Your knowledge of Scripture is excellent!';
      emoji = 'ðŸŒŸ';
    } else if (percentage >= 80) {
      grade = 'A';
      message = 'Great job! You have strong biblical knowledge!';
      emoji = 'â­';
    } else if (percentage >= 70) {
      grade = 'B';
      message = 'Good work! Keep studying God\'s Word!';
      emoji = 'ðŸ‘';
    } else if (percentage >= 60) {
      grade = 'C';
      message = 'Nice effort! Continue growing in Scripture!';
      emoji = 'ðŸ“–';
    } else {
      grade = 'D';
      message = 'Keep practicing! God\'s Word is always there for you!';
      emoji = 'ðŸ’ª';
    }

    const resultsHTML = `
      <div style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        max-width: 700px;
        margin: 20px auto;
        text-align: center;
        color: white;
      ">
        <div style="font-size: 60px; margin-bottom: 20px;">${emoji}</div>
        <h1 style="font-size: 42px; margin-bottom: 10px;">Quiz Complete!</h1>
        
        <div style="
          background: white;
          color: #333;
          padding: 30px;
          border-radius: 15px;
          margin: 30px 0;
          box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        ">
          <div style="font-size: 72px; font-weight: bold; color: #667eea; margin-bottom: 10px;">
            ${this.score}/${this.questions.length}
          </div>
          <div style="font-size: 24px; font-weight: bold; margin-bottom: 10px;">
            ${percentage}%
          </div>
          <div style="
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 30px;
            border-radius: 25px;
            font-size: 28px;
            font-weight: bold;
            margin-top: 10px;
          ">
            Grade: ${grade}
          </div>
        </div>

        <div style="
          background: rgba(255,255,255,0.2);
          padding: 20px;
          border-radius: 12px;
          font-size: 18px;
          margin-bottom: 30px;
        ">
          ${message}
        </div>

        <div style="
          background: rgba(255,255,255,0.1);
          padding: 20px;
          border-radius: 12px;
          margin-bottom: 20px;
          font-size: 16px;
          font-style: italic;
        ">
          "Thy word is a lamp unto my feet, and a light unto my path."<br>
          - Psalm 119:105 (KJV)
        </div>

        <button onclick="location.reload()" style="
          background: white;
          color: #667eea;
          border: none;
          padding: 18px 50px;
          border-radius: 30px;
          font-size: 20px;
          font-weight: bold;
          cursor: pointer;
          box-shadow: 0 5px 15px rgba(0,0,0,0.2);
          transition: all 0.3s ease;
          margin-top: 20px;
        " onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">
          Take Quiz Again ðŸ”„
        </button>
      </div>
    `;

    this.container.innerHTML = resultsHTML;
  }

  // Shuffle questions for variety
  shuffleQuestions() {
    for (let i = this.questions.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.questions[i], this.questions[j]] = [this.questions[j], this.questions[i]];
    }
  }
}

// ========================================
// INITIALIZE QUIZ
// ========================================

// Wait for DOM to load
document.addEventListener('DOMContentLoaded', function() {
  // Create quiz instance
  const quiz = new MultipleChoiceQuiz(multipleChoiceQuestions);
  
  // Optional: Shuffle questions for variety
  // quiz.shuffleQuestions();
  
  // Initialize quiz in the container
  quiz.init('multiple-choice-container');
});

// Export for use in other modules if needed
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { multipleChoiceQuestions, MultipleChoiceQuiz };
}
